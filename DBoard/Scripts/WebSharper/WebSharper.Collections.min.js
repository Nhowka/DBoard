(function(){var a=this,b=a.WebSharper=a.WebSharper||{},c=b.Collections=b.Collections||{},d=c.DictionaryUtil=c.DictionaryUtil||{},e=c.Dictionary=c.Dictionary||{},f=c.BalancedTree=c.BalancedTree||{},g=f.Tree=f.Tree||{},h=c.Pair=c.Pair||{},i=c.MapUtil=c.MapUtil||{},j=c.FSharpMap=c.FSharpMap||{},k=c.Map=c.Map||{},l=c.SetUtil=c.SetUtil||{},m=c.FSharpSet=c.FSharpSet||{},n=c.Set=c.Set||{},o=a.System=a.System||{},p=o.Collections=o.Collections||{},q=p.Generic=p.Generic||{},r=q.List=q.List||{},s=r.Enumerator=r.Enumerator||{},t=c.List=c.List||{},u=c.ResizeArray=c.ResizeArray||{},v=c.E=c.E||{},w=c.LinkedList=c.LinkedList||{},x=c.HashSetUtil=c.HashSetUtil||{},y=c.HashSet=c.HashSet||{},z=b.Grouping=b.Grouping||{},A=b.FsComparer=b.FsComparer||{},B=b.ProjectionComparer=b.ProjectionComparer||{},C=b.CompoundComparer=b.CompoundComparer||{},D=b.ReverseComparer=b.ReverseComparer||{},E=b.OrderedEnumerable=b.OrderedEnumerable||{},F=b.Linq=b.Linq||{},G=b&&b.Operators,H=a.IntelliFactory,I=H&&H.Runtime,J=b&&b.JavaScript,K=J&&J.JSModule,L=b&&b.Enumerator,M=b&&b.Unchecked,N=b&&b.Seq,O=b&&b.Arrays,P=b&&b.List,Q=b&&b.Option,R=b&&b.Nullable;d.getHashCode=function(S,T){return S.CGetHashCode(T);};d.equals=function(S,T,U){return S.CEquals(T,U);};d.notPresent=function(){return G.FailWith("The given key was not present in the dictionary.");};e=c.Dictionary=I.Class({TryGetValue:function(S,T){var U;U=this.hash(S);return this.data.hasOwnProperty(U)?(T.set(this.data[U].V),true):false;},Remove:function(S){var T;T=this.hash(S);return this.data.hasOwnProperty(T)?(K.Delete(this.data,T),this.count=this.count-1,true):false;},GetEnumerator$1:function(){return L.Get(K.GetFieldValues(this.data));},set_Item:function(S,T){var U;U=this.hash(S);!this.data.hasOwnProperty(U)?this.count=this.count+1:null;this.data[U]={K:S,V:T};},get_Item:function(S){var T;T=this.hash(S);return this.data.hasOwnProperty(T)?this.data[T].V:d.notPresent();},ContainsKey:function(S){return this.data.hasOwnProperty(this.hash(S));},Clear:function(){this.data={};this.count=0;},Add:function(S,T){var U;U=this.hash(S);this.data.hasOwnProperty(U)?G.FailWith("An item with the same key has already been added."):(this.data[U]={K:S,V:T},this.count=this.count+1);},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();}},null,e);e.New=I.Ctor(function(S,T){e.New$6.call(this,S,I.Curried2(function(U,V){return d.equals(T,U,V);}),function(U){return d.getHashCode(T,U);});},e);e.New$1=I.Ctor(function(S){e.New$6.call(this,S,I.Curried2(M.Equals),M.Hash);},e);e.New$2=I.Ctor(function(S,T){e.New$3.call(this,T);},e);e.New$3=I.Ctor(function(S){e.New$6.call(this,[],I.Curried2(function(T,U){return d.equals(S,T,U);}),function(T){return d.getHashCode(S,T);});},e);e.New$4=I.Ctor(function(S){e.New$5.call(this);},e);e.New$5=I.Ctor(function(){e.New$6.call(this,[],I.Curried2(M.Equals),M.Hash);},e);e.New$6=I.Ctor(function(S,T,U){this.hash=U;this.count=0;this.data={};var V=L.Get(S);try{while(V.MoveNext()){var W;W=V.Current();this.data[this.hash(W.K)]=W.V;}}finally{"Dispose"in V?V.Dispose():null;}},e);g=f.Tree=I.Class({},null,g);g.New=function(S,T,U,V,W){return new g({Node:S,Left:T,Right:U,Height:V,Count:W});};f.TryFind=function(S,T){var U;U=(f.Lookup(S,T))[0];return U==null?null:{$:1,$0:U.Node};};f.Contains=function(S,T){return!((f.Lookup(S,T))[0]==null);};f.Add=function(S,T){return f.Put(I.Curried2(function(U,V){return V;}),S,T);};f.Remove=function(S,T){var U,V,W,X,Y,Z;U=f.Lookup(S,T);V=U[0];W=U[1];return V==null?T:V.Right==null?f.Rebuild(W,V.Left):V.Left==null?f.Rebuild(W,V.Right):(X=(Y=(Z=N.append(f.Enumerate(false,V.Left),f.Enumerate(false,V.Right)),O.ofSeq(Z)),f.Build(Y,0,Y.length-1)),f.Rebuild(W,X));};f.Put=function(S,T,U){var V,W,X;V=f.Lookup(T,U);W=V[0];X=V[1];return W==null?f.Rebuild(X,f.Branch(T,null,null)):f.Rebuild(X,f.Branch((S(W.Node))(T),W.Left,W.Right));};f.Rebuild=function(S,T){function V(W){return W==null?0:W.Height;}var U;U=T;var W,X;for(W=0,X=O.length(S)-1;W<=X;W++){var Y,Z,_0,_1,_2,_3,_4;U=(Y=O.get(S,W),Y[0]?(Z=Y[1],_0=Y[2],V(U)>V(_0)+1?V(U.Left)===V(U.Right)+1?(_1=U.Left,f.Branch(_1.Node,f.Branch(Z,_0,_1.Left),f.Branch(U.Node,_1.Right,U.Right))):f.Branch(U.Node,f.Branch(Z,_0,U.Left),U.Right):f.Branch(Z,_0,U)):(_2=Y[1],_3=Y[2],V(U)>V(_3)+1?V(U.Right)===V(U.Left)+1?(_4=U.Right,f.Branch(_4.Node,f.Branch(U.Node,U.Left,_4.Left),f.Branch(_2,_4.Right,_3))):f.Branch(U.Node,U.Left,f.Branch(_2,U.Right,_3)):f.Branch(_2,U,_3)));}return U;};f.Lookup=function(S,T){var U,V,W;U=[];V=T;W=true;while(W){var X;V==null?void(W=false):(X=G.Compare(S,V.Node),X===0?void(W=false):X===1?(U.unshift([true,V.Node,V.Left]),void(V=V.Right)):(U.unshift([false,V.Node,V.Right]),void(V=V.Left)));}return[V,U];};f.OfSeq=function(S){var T;T=O.sort(O.ofSeq(N.distinct(S)));return f.Build(T,0,T.length-1);};f.Build=function(S,T,U){var V,W,X;return U-T+1<=0?null:(V=(T+U)/2>>0,W=f.Build(S,T,V-1),X=f.Build(S,V+1,U),f.Branch(O.get(S,V),W,X));};f.Enumerate=function(S,T){var U;U=function(V){var W,X;W=V[0];X=V[1];return W==null?X.$==1?{$:1,$0:[X.$0[0],[X.$0[1],X.$1]]}:null:S?U([W.Right,new P.T({$:1,$0:[W.Node,W.Left],$1:X})]):U([W.Left,new P.T({$:1,$0:[W.Node,W.Right],$1:X})]);};return N.unfold(U,[T,new P.T({$:0})]);};f.Branch=function(S,T,U){return g.New(S,T,U,1+G.Max(T==null?0:T.Height,U==null?0:U.Height),1+(T==null?0:T.Count)+(U==null?0:U.Count));};h=c.Pair=I.Class({Equals:function(S){return M.Equals(this.Key,S.Key);},GetHashCode:function(){return M.Hash(this.Key);},CompareTo0:function(S){return G.Compare(this.Key,S.Key);}},null,h);h.New=function(S,T){return new h({Key:S,Value:T});};i.fromSeq=function(S){var T;T=O.ofSeq(N.delay(function(){return N.collect(function(U){return[h.New(U[0],U[1])];},N.distinctBy(function(U){return U[0];},S));}));O.sortInPlace(T);return f.Build(T,0,T.length-1);};j=c.FSharpMap=I.Class({Equals:function(S){return this.get_Count()===S.get_Count()?N.forall2(I.Curried2(M.Equals),this,S):false;},GetHashCode:function(){return M.Hash(O.ofSeq(this));},GetEnumerator$1:function(){var S,T;return L.Get((S=f.Enumerate(false,this.tree),(T=function(U){return{K:U.Key,V:U.Value};},function(U){return N.map(T,U);})(S)));},TryFind:function(S){var T,U,V;T=(U=h.New(S,void 0),function(W){return f.TryFind(U,W);})(this.tree);return(V=function(W){return W.Value;},function(W){return Q.map(V,W);})(T);},Remove:function(S){var T;return new j.New$1((T=h.New(S,void 0),function(U){return f.Remove(T,U);})(this.tree));},get_Item:function(S){var T;T=this.TryFind(S);return T==null?G.FailWith("The given key was not present in the dictionary."):T.$0;},get_IsEmpty:function(){return this.tree==null;},get_Count:function(){var S;S=this.tree;return S==null?0:S.Count;},ContainsKey:function(S){var T;return(T=h.New(S,void 0),function(U){return f.Contains(T,U);})(this.tree);},Add:function(S,T){var U;return new j.New$1((U=h.New(S,T),function(V){return f.Add(U,V);})(this.tree));},get_Tree:function(){return this.tree;},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();},CompareTo0:function(S){return N.compareWith(I.Curried2(G.Compare),this,S);}},null,j);j.New=I.Ctor(function(S){j.New$1.call(this,i.fromSeq(S));},j);j.New$1=I.Ctor(function(S){this.tree=S;null;},j);k.Map=function(S,T){var U,V,W,X;U=(V=(W=f.Enumerate(false,T.get_Tree()),(X=function(Y){return h.New(Y.Key,(S(Y.Key))(Y.Value));},function(Y){return N.map(X,Y);})(W)),f.OfSeq(V));return new j.New$1(U);};k.TryPick=function(S,T){var U;return(U=function(V){return(S(V.K))(V.V);},function(V){return N.tryPick(U,V);})(T);};k.TryFindKey=function(S,T){var U;return(U=function(V){return(S(V.K))(V.V)?{$:1,$0:V.K}:null;},function(V){return N.tryPick(U,V);})(T);};k.TryFind=function(S,T){return T.TryFind(S);};k.ToSeq=function(S){var T,U;T=f.Enumerate(false,S.get_Tree());return(U=function(V){return[V.Key,V.Value];},function(V){return N.map(U,V);})(T);};k.Pick=function(S,T){var U;return(U=function(V){return(S(V.K))(V.V);},function(V){return N.pick(U,V);})(T);};k.Partition=function(S,T){var U,V,W,X,Y;U=(V=O.ofSeq(f.Enumerate(false,T.get_Tree())),(W=function(Z){return(S(Z.Key))(Z.Value);},function(Z){return O.partition(W,Z);})(V));return[new j.New$1((X=U[0],f.Build(X,0,X.length-1))),new j.New$1((Y=U[1],f.Build(Y,0,Y.length-1)))];};k.OfArray=function(S){var T,U,V;T=(U=(V=function(W){return h.New(W[0],W[1]);},function(W){return N.map(V,W);})(S),f.OfSeq(U));return new j.New$1(T);};k.Iterate=function(S,T){var U;(U=function(V){(S(V.K))(V.V);},function(V){N.iter(U,V);})(T);};k.ForAll=function(S,T){var U;return(U=function(V){return(S(V.K))(V.V);},function(V){return N.forall(U,V);})(T);};k.FoldBack=function(S,T,U){var V,W;V=f.Enumerate(true,T.get_Tree());return(W=I.Curried2(function(X,Y){return((S(Y.Key))(Y.Value))(X);}),function(X){return N.fold(W,U,X);})(V);};k.Fold=function(S,T,U){var V,W;V=f.Enumerate(false,U.get_Tree());return(W=I.Curried2(function(X,Y){return((S(X))(Y.Key))(Y.Value);}),function(X){return N.fold(W,T,X);})(V);};k.FindKey=function(S,T){var U;return(U=function(V){return(S(V.K))(V.V)?{$:1,$0:V.K}:null;},function(V){return N.pick(U,V);})(T);};k.Filter=function(S,T){var U,V,W,X,Y;U=(V=(W=(X=f.Enumerate(false,T.get_Tree()),(Y=function(Z){return(S(Z.Key))(Z.Value);},function(Z){return N.filter(Y,Z);})(X)),O.ofSeq(W)),f.Build(V,0,V.length-1));return new j.New$1(U);};k.Exists=function(S,T){var U;return(U=function(V){return(S(V.K))(V.V);},function(V){return N.exists(U,V);})(T);};l.ofSeq=function(S){var T;T=O.ofSeq(S);O.sortInPlace(T);return f.Build(T,0,T.length-1);};m=c.FSharpSet=I.Class({Equals:function(S){return this.get_Count()===S.get_Count()?N.forall2(I.Curried2(M.Equals),this,S):false;},GetHashCode:function(){return -1741749453+M.Hash(O.ofSeq(this));},GetEnumerator$1:function(){return L.Get(f.Enumerate(false,this.tree));},Remove:function(S){return new m.New$1(f.Remove(S,this.tree));},get_MinimumElement:function(){return N.head(f.Enumerate(false,this.tree));},get_MaximumElement:function(){return N.head(f.Enumerate(true,this.tree));},IsSupersetOf:function(S){var T;T=this;return N.forall(function(U){return T.Contains(U);},S);},IsSubsetOf:function(S){return N.forall(function(T){return S.Contains(T);},this);},IsProperSupersetOf:function(S){return this.IsSupersetOf(S)?this.get_Count()>S.get_Count():false;},IsProperSubsetOf:function(S){return this.IsSubsetOf(S)?this.get_Count()<S.get_Count():false;},get_Tree:function(){return this.tree;},get_IsEmpty:function(){return this.tree==null;},get_Count:function(){var S;S=this.tree;return S==null?0:S.Count;},Contains:function(S){return f.Contains(S,this.tree);},Add:function(S){return new m.New$1(f.Add(S,this.tree));},sub:function(S){return n.Filter(function(T){return!S.Contains(T);},this);},add:function(S){return new m.New$1(f.OfSeq(N.append(this,S)));},CompareTo0:function(S){return N.compareWith(I.Curried2(G.Compare),this,S);},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();}},null,m);m.New=I.Ctor(function(S){m.New$1.call(this,l.ofSeq(S));},m);m.New$1=I.Ctor(function(S){this.tree=S;null;},m);n.Partition=function(S,T){var U;U=O.partition(S,O.ofSeq(T));return[new m.New$1(f.OfSeq(U[0])),new m.New$1(f.OfSeq(U[1]))];};n.FoldBack=function(S,T,U){return N.fold(I.Curried2(function(V,W){return(S(W))(V);}),U,f.Enumerate(true,T.get_Tree()));};n.Filter=function(S,T){var U;return new m.New$1((U=O.ofSeq(N.filter(S,T)),f.Build(U,0,U.length-1)));};s=r.Enumerator=I.Class({get_Current:function(){return O.get(this.arr,this.i);},MoveNext$1:function(){this.i=this.i+1;return this.i<O.length(this.arr);},Dispose:function(){},Current:function(){return O.get(this.arr,this.i);},Reset:function(){G.FailWith("IEnumerator.Reset not supported");},Current0:function(){return O.get(this.arr,this.i);},MoveNext:function(){return this.MoveNext$1();}},null,s);s.New=I.Ctor(function(S){this.arr=S;this.i=-1;null;},s);t=c.List=I.Class({ToArray:function(){return this.arr.slice();},Reverse:function(S,T){O.reverse(this.arr,S,T);},Reverse$1:function(){this.arr.reverse();},RemoveRange:function(S,T){u.splice(this.arr,S,T,[]);},RemoveAt:function(S){u.splice(this.arr,S,1,[]);},set_Item:function(S,T){O.set(this.arr,S,T);},get_Item:function(S){return O.get(this.arr,S);},InsertRange:function(S,T){u.splice(this.arr,S,0,O.ofSeq(T));},Insert:function(S,T){u.splice(this.arr,S,0,[T]);},GetRange:function(S,T){return new t.New$3(O.sub(this.arr,S,T));},get_Count:function(){return O.length(this.arr);},CopyTo:function(S,T,U,V){O.blit(this.arr,S,T,U,V);},CopyTo$1:function(S,T){this.CopyTo(0,S,T,this.get_Count());},CopyTo$2:function(S){this.CopyTo$1(S,0);},Clear:function(){u.splice(this.arr,0,O.length(this.arr),[]);},AddRange:function(S){var T;T=this;N.iter(function(U){T.Add(U);},S);},Add:function(S){this.arr.push(S);},GetEnumerator:function(){return L.Get(this.arr);},GetEnumerator0:function(){return L.Get0(this.arr);}},null,t);t.New=I.Ctor(function(S){t.New$3.call(this,O.ofSeq(S));},t);t.New$1=I.Ctor(function(S){t.New$3.call(this,[]);},t);t.New$2=I.Ctor(function(){t.New$3.call(this,[]);},t);t.New$3=I.Ctor(function(S){this.arr=S;null;},t);u.splice=function(S,T,U,V){return a.Array.prototype.splice.apply(S,[T,U].concat(V));};v=c.E=I.Class({Reset:function(){},Dispose:function(){},MoveNext:function(){this.c=this.c.n;return!M.Equals(this.c,null);},Current0:function(){var S;S=this.c.v;return a.id(S);},Current:function(){return this.c.v;}},null,v);v.New=I.Ctor(function(S){this.c=S;null;},v);w=c.LinkedList=I.Class({RemoveLast:function(){this.Remove$1(this.p);},RemoveFirst:function(){this.Remove$1(this.n);},Remove:function(S){var T;T=this.Find(S);return M.Equals(T,null)?false:(this.Remove$1(T),true);},Remove$1:function(S){var T,U;T=S.p;U=S.n;M.Equals(T,null)?this.n=U:T.n=U;M.Equals(U,null)?this.p=T:U.p=T;this.c=this.c-1;},GetEnumerator$1:function(){return new v.New(this);},FindLast:function(S){var T,U;T=this.p;U=true;while(U?!M.Equals(T,null):false)T.v==S?void(U=false):void(T=T.p);return U?null:T;},Find:function(S){var T,U;T=this.n;U=true;while(U?!M.Equals(T,null):false)T.v==S?void(U=false):void(T=T.n);return U?null:T;},Contains:function(S){var T,U;T=false;U=this.n;while(!M.Equals(U,null)?!T:false)U.v==S?void(T=true):void(U=U.n);return T;},Clear:function(){this.c=0;this.n=null;this.p=null;},AddLast:function(S){var T;return this.c===0?(T={p:null,n:null,v:S},this.n=T,this.p=this.n,this.c=1,T):this.AddAfter(this.p,S);},AddFirst:function(S){var T;return this.c===0?(T={p:null,n:null,v:S},this.n=T,this.p=this.n,this.c=1,T):this.AddBefore(this.n,S);},AddBefore:function(S,T){var U,V;U=S.p;V={p:U,n:S,v:T};M.Equals(S.p,null)?this.n=V:null;S.p=V;!M.Equals(U,null)?U.n=V:null;this.c=this.c+1;return V;},AddAfter:function(S,T){var U,V;U=S.n;V={p:S,n:U,v:T};M.Equals(S.n,null)?this.p=V:null;S.n=V;!M.Equals(U,null)?U.p=V:null;this.c=this.c+1;return V;},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();}},null,w);w.New=I.Ctor(function(){w.New$1.call(this,[]);},w);w.New$1=I.Ctor(function(S){this.c=0;this.n=null;this.p=null;var T=L.Get(S);T.MoveNext()?(this.n={p:null,n:null,v:T.Current()},this.p=this.n,this.c=1):null;while(T.MoveNext()){var U;U={p:this.p,n:null,v:T.Current()};this.p.n=U;this.p=U;this.c=this.c+1;}},w);x.concat=function(S){var U,T=[];for(var V in S)T.push.apply(T,S[V]);return T;};y=c.HashSet=I.Class({add:function(S){var T,U,V;T=this;U=this.hash(S);V=this.data[U];return V==null?(this.data[U]=[S],this.count=this.count+1,true):T.arrContains(S,V)?false:(V.push(S),this.count=this.count+1,true);},arrRemove:function(S,T){var U,V,W,X;V=true;W=0;var Y=T.length;while(V?W<Y:false)(this.equals(T[W]))(S)?(T.splice.apply(T,[W,1].concat([])),void(V=false)):void(W=W+1);X=!V;return X;},arrContains:function(S,T){var U,V,W,X;V=true;W=0;var Y=T.length;while(V?W<Y:false)(this.equals(T[W]))(S)?void(V=false):void(W=W+1);X=!V;return X;},UnionWith:function(S){var T=L.Get(S);try{while(T.MoveNext())this.Add(T.Current());}finally{"Dispose"in T?T.Dispose():null;}},SymmetricExceptWith:function(S){var T=L.Get(S);try{while(T.MoveNext()){var U;U=T.Current();this.Contains(U)?this.Remove(U):this.Add(U);}}finally{"Dispose"in T?T.Dispose():null;}},SetEquals:function(S){var T;T=new y.New$4(S,this.equals,this.hash);return this.get_Count()===T.get_Count()?this.IsSupersetOf(T):false;},RemoveWhere:function(S){var U,V,T=x.concat(this.data);for(U=0,V=T.length-1;U<=V;U++){var W;W=T[U];S(W)?this.Remove(W):null;}},Remove:function(S){var T,U;T=this;U=this.data[this.hash(S)];return U==null?false:T.arrRemove(S,U)?(this.count=this.count-1,true):false;},Overlaps:function(S){var T,U;T=this;return(U=function(V){return T.Contains(V);},function(V){return N.exists(U,V);})(S);},IsSupersetOf:function(S){var T,U;T=this;return(U=function(V){return T.Contains(V);},function(V){return N.forall(U,V);})(S);},IsSubsetOf:function(S){var T,U,V;T=new y.New$4(S,this.equals,this.hash);U=x.concat(this.data);return(V=function(W){return T.Contains(W);},function(W){return N.forall(V,W);})(U);},IsProperSupersetOf:function(S){var T;T=O.ofSeq(S);return this.count>O.length(T)?this.IsSupersetOf(T):false;},IsProperSubsetOf:function(S){var T;T=O.ofSeq(S);return this.count<O.length(T)?this.IsSubsetOf(T):false;},IntersectWith:function(S){var V,W,T=new y.New$4(S,this.equals,this.hash),U=x.concat(this.data);for(V=0,W=U.length-1;V<=W;V++){var X;X=U[V];!T.Contains(X)?this.Remove(X):null;}},ExceptWith:function(S){var T=L.Get(S);try{while(T.MoveNext())this.Remove(T.Current());}finally{"Dispose"in T?T.Dispose():null;}},get_Count:function(){return this.count;},CopyTo:function(S){var T;T=0;var V,W,U=x.concat(this.data);for(V=0,W=U.length-1;V<=W;V++)O.set(S,V,U[V]);},Contains:function(S){var T,U;T=this;U=this.data[this.hash(S)];return U==null?false:T.arrContains(S,U);},Clear:function(){this.data=a.Array.prototype.constructor.apply(a.Array,[]);this.count=0;},Add:function(S){return this.add(S);},GetEnumerator:function(){return L.Get(x.concat(this.data));},GetEnumerator0:function(){return L.Get(x.concat(this.data));}},null,y);y.New=I.Ctor(function(S,T){y.New$4.call(this,S,I.Curried2(function(U,V){return d.equals(T,U,V);}),function(U){return d.getHashCode(T,U);});},y);y.New$1=I.Ctor(function(S){y.New$4.call(this,[],I.Curried2(function(T,U){return d.equals(S,T,U);}),function(T){return d.getHashCode(S,T);});},y);y.New$2=I.Ctor(function(S){y.New$4.call(this,S,I.Curried2(M.Equals),M.Hash);},y);y.New$3=I.Ctor(function(){y.New$4.call(this,[],I.Curried2(M.Equals),M.Hash);},y);y.New$4=I.Ctor(function(S,T,U){this.equals=T;this.hash=U;this.data=a.Array.prototype.constructor.apply(a.Array,[]);this.count=0;var V=L.Get(S);try{while(V.MoveNext())this.add(V.Current());}finally{"Dispose"in V?V.Dispose():null;}},y);z=b.Grouping=I.Class({System_Linq_IGrouping_2$get_Key:function(){return this.k;},GetEnumerator0:function(){return L.Get0(this.v);},GetEnumerator:function(){return L.Get(this.v);}},null,z);z.New=I.Ctor(function(S,T){this.k=S;this.v=T;null;},z);A=b.FsComparer=I.Class({Compare:function(S,T){return G.Compare(S,T);}},null,A);A.New=I.Ctor(function(){},A);B=b.ProjectionComparer=I.Class({Compare:function(S,T){return this.primary.Compare(this.projection(S),this.projection(T));}},null,B);B.New=I.Ctor(function(S,T){this.primary=S;this.projection=T;null;},B);C=b.CompoundComparer=I.Class({Compare:function(S,T){var U;U=this.primary.Compare(S,T);return U===0?this.secondary.Compare(S,T):U;}},null,C);C.New=I.Ctor(function(S,T){this.primary=S;this.secondary=T;null;},C);D=b.ReverseComparer=I.Class({Compare:function(S,T){return this.primary.Compare(this.projection(T),this.projection(S));}},null,D);D.New=I.Ctor(function(S,T){this.primary=S;this.projection=T;null;},D);E=b.OrderedEnumerable=I.Class({GetEnumerator0:function(){return L.Get(this);},GetEnumerator:function(){var S,T;S=this;T=O.ofSeq(this.source);O.sortInPlaceWith(I.Curried2(function(U,V){return S.primary.Compare(U,V);}),T);return L.Get(T);},System_Linq_IOrderedEnumerable_1$CreateOrderedEnumerable:function(S,T,U){var V;V=U?new D.New(T,S):new B.New(T,S);return new E.New(this.source,new C.New(this.primary,V));}},null,E);E.New=I.Ctor(function(S,T){this.source=S;this.primary=T;null;},E);F.ElementAtOrDefault=function(S,T,U){var V;try{V=N.nth(T,S);}catch(W){V=U;}return V;};F.FirstOrDefault=function(S,T){var U,V=L.Get(S);try{U=V.MoveNext()?V.Current():T;}finally{"Dispose"in V?V.Dispose():null;}return U;};F.FirstOrDefault$1=function(S,T,U){var V;V=N.tryFind(T,S);return V==null?U:V.$0;};F.LastOrDefault=function(S,T,U){var V;V=F.LastPred(S,T);return V==null?U:V.$0;};F.SingleOrDefault=function(S,T,U){var V,W=L.Get(S);try{var X;X=null;while(W.MoveNext())T(W.Current())?(X!=null?X.$==1:false)?G.InvalidOp("Sequence contains more than one element"):void(X={$:1,$0:W.Current()}):null;V=X==null?U:X.$0;}finally{"Dispose"in W?W.Dispose():null;}return V;};F.Where=function(S,T){return N.delay(function(){return N.enumUsing(L.Get(S),function(U){var V;V=0;return N.enumWhile(function(){return U.MoveNext();},N.delay(function(){return N.append(T(U.Current(),V)?[U.Current()]:[],N.delay(function(){V=V+1;return[];}));}));});});};F.Union=function(S,T,U){var V=new y.New(S,U),W=L.Get(T);try{while(W.MoveNext())V.Add(W.Current());}finally{"Dispose"in W?W.Dispose():null;}return V;};F.ToDictionary=function(S,T,U,V){var W;W=new e.New$3(V);N.iter(function(X){W.Add(T(X),U(X));},S);return W;};F.ToDictionary$1=function(S,T,U){var V;V=new e.New$3(U);N.iter(function(W){V.Add(T(W),W);},S);return V;};F.TakeWhile=function(S,T){return N.delay(function(){return N.enumUsing(L.Get(S),function(U){return N.enumWhile(function(){return U.MoveNext()?T(U.Current()):false;},N.delay(function(){return[U.Current()];}));});});};F.TakeWhile$1=function(S,T){return N.delay(function(){return N.enumUsing(L.Get(S),function(U){var V;V=0;return N.enumWhile(function(){return U.MoveNext()?T(U.Current(),V):false;},N.delay(function(){V=V+1;return[U.Current()];}));});});};F.Take=function(S,T){return N.delay(function(){return N.enumUsing(L.Get(S),function(U){var V;V=0;return N.enumWhile(function(){return V<T?U.MoveNext():false;},N.delay(function(){V=V+1;return[U.Current()];}));});});};F.Sum=function(S){var T,U;T=(U=function(V){return V!=null?{$:1,$0:R.get(V)}:null;},function(V){return N.choose(U,V);})(S);return N.isEmpty(T)?null:N.sum(T);};F.SkipWhile=function(S,T){return N.delay(function(){return N.enumUsing(L.Get(S),function(U){var V;V=true;return N.append(N.enumWhile(function(){return V?U.MoveNext():false;},N.delay(function(){return!T(U.Current())?(V=false,[]):[];})),N.delay(function(){return!V?N.append([U.Current()],N.delay(function(){return N.enumWhile(function(){return U.MoveNext();},N.delay(function(){return[U.Current()];}));})):[];}));});});};F.SkipWhile$1=function(S,T){return N.delay(function(){return N.enumUsing(L.Get(S),function(U){var V,W;V=0;W=true;return N.append(N.enumWhile(function(){return W?U.MoveNext():false;},N.delay(function(){return T(U.Current(),V)?(V=V+1,[]):(W=false,[]);})),N.delay(function(){return!W?N.append([U.Current()],N.delay(function(){return N.enumWhile(function(){return U.MoveNext();},N.delay(function(){return[U.Current()];}));})):[];}));});});};F.Skip=function(S,T){return N.delay(function(){return N.enumUsing(L.Get(S),function(U){var V;V=0;return N.append(N.enumWhile(function(){return V<T?U.MoveNext():false;},N.delay(function(){V=V+1;return[];})),N.delay(function(){return N.enumWhile(function(){return U.MoveNext();},N.delay(function(){return[U.Current()];}));}));});});};F.Single=function(S,T){var U,V;U=((V=I.Curried2(function(W,X){return T(X)?W!=null?G.InvalidOp("Sequence contains more than one matching element"):{$:1,$0:X}:W;}),I.Curried2(function(W,X){return N.fold(V,W,X);}))(null))(S);return(U!=null?U.$==1:false)?U.$0:G.InvalidOp("Sequence contains no elements");};F.SequenceEqual=function(S,T,U){var V,W=L.Get(S);try{var X,Y=L.Get(S);try{var Z;Z=function(){return W.MoveNext()?(Y.MoveNext()?U.CEquals(W.Current(),Y.Current()):false)?Z():false:!Y.MoveNext();};X=Z();}finally{"Dispose"in Y?Y.Dispose():null;}V=X;}finally{"Dispose"in W?W.Dispose():null;}return V;};F.SelectMany=function(S,T,U){var V,W,X;V=(W=I.Curried2(function(Y,Z){return[Z,T(Z,Y)];}),function(Y){return N.mapi(W,Y);})(S);return(X=function(Y){var Z,_0;Z=Y[0];return(_0=function(_1){return U(Z,_1);},function(_1){return N.map(_0,_1);})(Y[1]);},function(Y){return N.collect(X,Y);})(V);};F.SelectMany$1=function(S,T,U){var V,W,X;V=(W=function(Y){return[Y,T(Y)];},function(Y){return N.map(W,Y);})(S);return(X=function(Y){var Z,_0;Z=Y[0];return(_0=function(_1){return U(Z,_1);},function(_1){return N.map(_0,_1);})(Y[1]);},function(Y){return N.collect(X,Y);})(V);};F.SelectMany$2=function(S,T){var U;U=N.mapi(I.Curried2(function(V,W){return T(W,V);}),S);return N.concat(U);};F.Select=function(S,T){return N.mapi(I.Curried2(function(U,V){return T(V,U);}),S);};F.Reverse=function(S){return O.ofSeq(S).slice().reverse();};F.Repeat=function(S,T){return N.init(T,function(){return S;});};F.Range=function(S,T){return N.init(T,function(U){return S+U;});};F.OrderByDescending=function(S,T,U){return new E.New(S,new D.New(U,T));};F.OrderBy=function(S,T,U){return new E.New(S,new B.New(U,T));};F.Min=function(S){var T,U;T=(U=function(V){return V!=null?{$:1,$0:R.get(V)}:null;},function(V){return N.choose(U,V);})(S);return N.isEmpty(T)?null:N.min(T);};F.Max=function(S){var T,U;T=(U=function(V){return V!=null?{$:1,$0:R.get(V)}:null;},function(V){return N.choose(U,V);})(S);return N.isEmpty(T)?null:N.max(T);};F.Last=function(S,T){var U;U=F.LastPred(S,T);return U==null?G.InvalidOp("Sequence contains no matching element"):U.$0;};F.LastPred=function(S,T){var U;return((U=I.Curried2(function(V,W){return T(W)?{$:1,$0:W}:V;}),I.Curried2(function(V,W){return N.fold(U,V,W);}))(null))(S);};F.Join=function(S,T,U,V,W,X){return N.delay(function(){var Y=new e.New$3(X),Z=O.ofSeq(N.delay(function(){return N.collect(function(_0){var _1,_2,_3,_4;_1=U(_0);_2=(_3=null,[Y.TryGetValue(_1,{get:function(){return _3;},set:function(_5){_3=_5;}}),_3]);return _2[0]?[]:(_4=[_0,new t.New$2()],Y.Add(_1,_4),[_4]);},S);})),_0=L.Get(T);try{while(_0.MoveNext())(function(){var _1,_2,_3,_4;_1=_0.Current();_2=V(_1);_3=(_4=null,[Y.TryGetValue(_2,{get:function(){return _4;},set:function(_5){_4=_5;}}),_4]);return _3[0]?_3[1][1].Add(_1):null;}());}finally{"Dispose"in _0?_0.Dispose():null;}return O.ofSeq(N.delay(function(){return N.collect(function(_1){var _2;_2=_1[0];return N.map(function(_3){return W(_2,_3);},_1[1]);},Z);}));});};F.Intersect=function(S,T,U){var V;V=new y.New(S,U);return N.delay(function(){var W;W=new y.New$1(U);return N.collect(function(X){return(V.Contains(X)?W.Add(X):false)?[X]:[];},T);});};F.GroupJoin=function(S,T,U,V,W,X){return N.delay(function(){var Y,Z=new e.New$3(X),_0=O.ofSeq(N.delay(function(){return N.collect(function(_1){var _2,_3,_4,_5;_2=U(_1);_3=(_4=null,[Z.TryGetValue(_2,{get:function(){return _4;},set:function(_6){_4=_6;}}),_4]);return _3[0]?[]:(_5=[_1,new t.New$2()],Z.Add(_2,_5),[_5]);},S);})),_1=L.Get(T);try{while(_1.MoveNext())(function(){var _2,_3,_4,_5;_2=_1.Current();_3=V(_2);_4=(_5=null,[Z.TryGetValue(_3,{get:function(){return _5;},set:function(_6){_5=_6;}}),_5]);return _4[0]?_4[1][1].Add(_2):null;}());}finally{"Dispose"in _1?_1.Dispose():null;}(Y=I.Curried2(function(_2,_3){O.set(_0,_2,W(_3[0],_3[1]));}),function(_2){O.iteri(Y,_2);})(_0);return _0;});};F.GroupBy=function(S,T,U,V,W){var X,Y;X=F.GroupBy$1(S,T,U,W);return(Y=function(Z){return V(Z.System_Linq_IGrouping_2$get_Key(),Z);},function(Z){return N.map(Y,Z);})(X);};F.GroupBy$1=function(S,T,U,V){return N.delay(function(){return O.ofSeq(N.delay(function(){var W;W=new e.New$3(V);return N.collect(function(X){var Y,Z,_0,_1,_2;Y=T(X);Z=U(X);_0=(_1=null,[W.TryGetValue(Y,{get:function(){return _1;},set:function(_3){_1=_3;}}),_1]);return _0[0]?(_0[1].Add(Z),[]):(_2=new t.New$2(),_2.Add(Z),W.set_Item(Y,_2),[new z.New(Y,_2)]);},S);}));});};F.Except=function(S,T,U){var V=new y.New(S,U),W=L.Get(T);try{while(W.MoveNext())V.Remove(W.Current());}finally{"Dispose"in W?W.Dispose():null;}return V;};F.Distinct=function(S,T){return N.delay(function(){return N.enumUsing(L.Get(S),function(U){var V;V=new y.New$1(T);return N.enumWhile(function(){return U.MoveNext();},N.delay(function(){return V.Add(U.Current())?[U.Current()]:[];}));});});};F.DefaultIfEmpty=function(S,T){return N.isEmpty(S)?[T]:S;};F.Average=function(S){var T,U;U=[];var V=L.Get(S);try{var W;while(V.MoveNext()){var X,Y;(X=V.Current(),X!=null)?U.push((Y=V.Current(),R.get(Y))):null;}T=O.length(U)===0?null:N.sum(U)/(W=O.length(U),a.Number(W));}finally{"Dispose"in V?V.Dispose():null;}return T;};}());
