(function(){var a=this,b=a.WebSharper=a.WebSharper||{},c=b.JavaScript=b.JavaScript||{},d=c.JSModule=c.JSModule||{},e=b.Collections=b.Collections||{},f=e.EqualityComparer=e.EqualityComparer||{},g=b.MacroModule=b.MacroModule||{},h=g.EquatableEqualityComparer=g.EquatableEqualityComparer||{},i=g.BaseEqualityComparer=g.BaseEqualityComparer||{},j=e.Comparer=e.Comparer||{},k=g.ComparableComparer=g.ComparableComparer||{},l=g.BaseComparer=g.BaseComparer||{},m=c.Pervasives=c.Pervasives||{},n=b.Json=b.Json||{},o=b.Remoting=b.Remoting||{},p=o.XhrProvider=o.XhrProvider||{},q=o.AjaxRemotingProvider=o.AjaxRemotingProvider||{},r=a.StartupCode$WebSharper_Main$Remoting=a.StartupCode$WebSharper_Main$Remoting||{},s=b.PrintfHelpers=b.PrintfHelpers||{},t=b.Concurrency=b.Concurrency||{},u=t.AsyncBody=t.AsyncBody||{},v=t.Scheduler=t.Scheduler||{},w=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{},x=b.Enumerator=b.Enumerator||{},y=x.T=x.T||{},z=b.HtmlContentExtensions=b.HtmlContentExtensions||{},A=z.SingleNode=z.SingleNode||{},B=b.Activator=b.Activator||{},C=b.Arrays=b.Arrays||{},D=b.Seq=b.Seq||{},E=b.List=b.List||{},F=b.Arrays2D=b.Arrays2D||{},G=b.CancellationTokenSource=b.CancellationTokenSource||{},H=b.Char=b.Char||{},I=b.Choice2=b.Choice2||{},J=b.Choice3=b.Choice3||{},K=b.Choice4=b.Choice4||{},L=b.Choice5=b.Choice5||{},M=b.Choice6=b.Choice6||{},N=b.Choice7=b.Choice7||{},O=b.Util=b.Util||{},P=b.DateUtil=b.DateUtil||{},Q=a.System=a.System||{},R=Q.Delegate=Q.Delegate||{},S=b.MatchFailureException=b.MatchFailureException||{},T=b.IndexOutOfRangeException=b.IndexOutOfRangeException||{},U=b.OperationCanceledException=b.OperationCanceledException||{},V=b.ArgumentException=b.ArgumentException||{},W=b.ArgumentOutOfRangeException=b.ArgumentOutOfRangeException||{},X=b.InvalidOperationException=b.InvalidOperationException||{},Y=b.AggregateException=b.AggregateException||{},Z=b.TimeoutException=b.TimeoutException||{},_0=b.FormatException=b.FormatException||{},_1=b.Guid=b.Guid||{},_2=b.Lazy=b.Lazy||{},_3=E.T=E.T||{},_4=b.Nullable=b.Nullable||{},_5=b.Ref=b.Ref||{},_6=b.Operators=b.Operators||{},_7=b.Slice=b.Slice||{},_8=b.Option=b.Option||{},_9=b.Queue=b.Queue||{},_=b.Random=b.Random||{},$=a.Microsoft=a.Microsoft||{},ba=$.FSharp=$.FSharp||{},bb=ba.Core=ba.Core||{},bc=bb.FSharpRef=bb.FSharpRef||{},bd=b.Control=b.Control||{},be=b.Stack=b.Stack||{},bf=b.Strings=b.Strings||{},bg=b.Task=b.Task||{},bh=b.Task1=b.Task1||{},bi=b.TaskCompletionSource=b.TaskCompletionSource||{},bj=b.Unchecked=b.Unchecked||{},bk=a.IntelliFactory,bl=bk&&bk.Runtime,bm=a.String;d.LogMore=function(bn){if(a.console)a.console.log.apply(a.console,bn);};d.Log=function(bn){if(a.console)a.console.log(bn);};d.ForEach=function(bn,bo){var bp;for(var bq in bn)if(bo(bq))break;};d.GetFieldValues=function(bn){var bp,bo=[];for(var bq in bn)bo.push(bn[bq]);return bo;};d.GetFieldNames=function(bn){var bp,bo=[];for(var bq in bn)bo.push(bq);return bo;};d.GetFields=function(bn){var bp,bo=[];for(var bq in bn)bo.push([bq,bn[bq]]);return bo;};d.Delete=function(bn,bo){return delete bn[bo];};f=e.EqualityComparer=bl.Class({CGetHashCode0:function(bn){return this.GetHashCode(bn);},CEquals0:function(bn,bo){return this.Equals(bn,bo);},CGetHashCode:function(bn){return this.GetHashCode(bn);},CEquals:function(bn,bo){return this.Equals(bn,bo);}},null,f);f.New=bl.Ctor(function(){},f);h=g.EquatableEqualityComparer=bl.Class({GetHashCode:function(bn){return bj.Hash(bn);},Equals:function(bn,bo){return bn.EEquals(bo);}},f,h);h.New=bl.Ctor(function(){f.New.call(this);null;},h);i=g.BaseEqualityComparer=bl.Class({GetHashCode:function(bn){return bj.Hash(bn);},Equals:function(bn,bo){return bj.Equals(bn,bo);}},f,i);i.New=bl.Ctor(function(){f.New.call(this);null;},i);j=e.Comparer=bl.Class({Compare0:function(bn,bo){return this.Compare$1(bn,bo);},Compare:function(bn,bo){return this.Compare$1(bn,bo);}},null,j);j.New=bl.Ctor(function(){},j);k=g.ComparableComparer=bl.Class({Compare$1:function(bn,bo){return bn.CompareTo(bo);}},j,k);k.New=bl.Ctor(function(){j.New.call(this);null;},k);l=g.BaseComparer=bl.Class({Compare$1:function(bn,bo){return _6.Compare(bn,bo);}},j,l);l.New=bl.Ctor(function(){j.New.call(this);null;},l);m.GetJS=function(bn,bo){var bp;bp=bn;var bq=x.Get(bo);try{while(bq.MoveNext())bp=bp[bq.Current()];}finally{"Dispose"in bq?bq.Dispose():null;}return bp;};m.NewFromSeq=function(bn){var bo={},bp=x.Get(bn);try{while(bp.MoveNext()){var bq;bq=bp.Current();bo[bq[0]]=bq[1];}}finally{"Dispose"in bp?bp.Dispose():null;}return bo;};n.Activate=function(bn){var bo,bp,bq,bs,bt,br=bn.$TYPES;for(bs=0,bt=C.length(br)-1;bs<=bt;bs++)C.set(br,bs,n.lookup(C.get(br,bs)));bq=function(bu){var bv,bw,bx,by,bz;return bj.Equals(bu,null)?bu:typeof bu=="object"?bu instanceof a.Array?n.shallowMap(bq,bu):(bv=n.shallowMap(bq,bu.$V),bw=bu.$T,bj.Equals(typeof bw,"undefined")?bv:(bx=C.get(br,bw),bx===a.WebSharper.List.T?E.ofArray(bv):(by=(bz=C.get(br,bw),new bz()),d.ForEach(bv,function(bA){by[bA]=bv[bA];return false;}),by))):bu;};bp=bq(bn.$DATA);return bp;};n.shallowMap=function(bn,bo){var bp;return bo instanceof a.Array?C.map(bn,bo):typeof bo=="object"?(bp={},d.ForEach(bo,function(bq){bp[bq]=bn(bo[bq]);return false;}),bp):bo;};n.lookup=function(bn){var bo,bp,bq=C.length(bn);bo=a;bp=0;while(bp<bq){var br,bs;br=C.get(bn,bp);bs=bo[br];!bj.Equals(typeof bs,void 0)?(bo=bs,void(bp=bp+1)):_6.FailWith("Invalid server reply. Failed to find type: "+br);}return bo;};p=o.XhrProvider=bl.Class({Sync:function(bn,bo,bp){var bq;bq=[null];o.ajax(false,bn,bo,bp,function(br){bq[0]=br;},function(br){throw br;},function(){o.ajax(false,bn,bo,bp,function(br){bq[0]=br;},function(br){throw br;},void 0);});return bq[0];},Async:function(bn,bo,bp,bq,br){o.ajax(true,bn,bo,bp,bq,br,function(){o.ajax(true,bn,bo,bp,bq,br,void 0);});}},null,p);p.New=bl.Ctor(function(){},p);q=o.AjaxRemotingProvider=bl.Class({get_EndPoint:function(){return o.EndPoint();},AsyncBase:function(bn,bo){var bp,bq,br;bp=this;bq=o.makeHeaders(bn);br=o.makePayload(bo);return t.Delay(function(){var bs;bs=t.GetCT();return t.Bind(bs,function(bt){return t.FromContinuations(function(bu){var bv,bw,bx,by,bz,bA,bB;bv=bu[0];bw=bu[1];bx=bu[2];by=[true];bz=(bA=function(){by[0]?(by[0]=false,bx(U.New.call(this,t.noneCT()))):null;},t.Register(bt,function(){bA();}));bB=bp.get_EndPoint();o.AjaxProvider().Async(bB,bq,br,function(bC){by[0]?(by[0]=false,bz.Dispose(),bv(n.Activate(a.JSON.parse(bC)))):null;},function(bC){by[0]?(by[0]=false,bz.Dispose(),bw(bC)):null;});});});});},Send:function(bn,bo){var bp,bq;bp=this;bq=t.Ignore(bp.AsyncBase(bn,bo));t.Start(bq,null);},Task:function(bn,bo){var bp,bq;bp=this;bq=bp.AsyncBase(bn,bo);return t.StartAsTask(bq,null);},Async:function(bn,bo){return this.AsyncBase(bn,bo);},Sync:function(bn,bo){var bp,bq,br,bs;bp=(bq=this.get_EndPoint(),br=o.makeHeaders(bn),bs=o.makePayload(bo),o.AjaxProvider().Sync(bq,br,bs));return n.Activate(a.JSON.parse(bp));}},null,q);q.New=bl.Ctor(function(){},q);o.ajax=function(bn,bo,bp,bq,br,bs,bt){var bu=new a.XMLHttpRequest(),bv=a.document.cookie.replace(new a.RegExp("(?:(?:^|.*;)\\s*csrftoken\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1");bu.open("POST",bo,bn);if(bn==true)bu.withCredentials=true;var bw;for(var bx in bp)bu.setRequestHeader(bx,bp[bx]);if(bv)bu.setRequestHeader("x-csrftoken",bv);var by=function(){if(bu.status==200)br(bu.responseText);else if(bt&&bu.status==403&&bu.responseText=="CSRF")bt();else{var bz="Response status is not 200: ";bs(new a.Error(bz+bu.status));}};if("onload"in bu)bu.onload=bu.onerror=bu.onabort=by;else bu.onreadystatechange=function(){if(bu.readyState==4)by();};bu.send(bq);};o.makePayload=function(bn){return a.JSON.stringify(bn);};o.makeHeaders=function(bn){return{"x-websharper-rpc":bn,"content-type":"application/json"};};o.AjaxProvider=function(){r.$cctor();return r.AjaxProvider;};o.set_AjaxProvider=function(bn){r.$cctor();r.AjaxProvider=bn;};o.UseHttps=function(){var bn;try{var bo,bp;bn=!(bo=a.window.location.href,bf.StartsWith(bo,"https://"))?(o.set_EndPoint((bp=a.window.location.href,bf.Replace(bp,"http://","https://"))),true):false;}catch(bq){bn=false;}return bn;};o.EndPoint=function(){r.$cctor();return r.EndPoint;};o.set_EndPoint=function(bn){r.$cctor();r.EndPoint=bn;};r.$cctor=bl.Cctor(function(){r.EndPoint="?";r.AjaxProvider=new p.New();});s.prettyPrint=function(bn){var bo,bp;return bn===null?"null":(bo=typeof bn,bo=="string"?"\""+bn+"\"":bo=="object"?bn instanceof a.Array?"[|"+(bp=C.map(s.prettyPrint,bn),bf.concat("; ",bp))+"|]":function(bq){var br,bs,bt,bu;br=a.String(bq);return br==="[object Object]"?"{"+(bs=(bt=d.GetFields(bq),(bu=function(bv){return bv[0]+" = "+s.prettyPrint(bv[1]);},function(bv){return C.map(bu,bv);})(bt)),bf.concat("; ",bs))+"}":br;}(bn):a.String(bn));};s.printArray2D=function(bn,bo){return bo===null?"null":"[["+bf.concat("][",D.delay(function(){var bp;bp=bo.length?bo[0].length:0;return D.map(function(bq){return bf.concat("; ",D.delay(function(){return D.map(function(br){return bn(C.get2D(bo,bq,br));},_6.range(0,bp-1));}));},_6.range(0,bo.length-1));}))+"]]";};s.printArray=function(bn,bo){var bp;return bo===null?"null":"[|"+(bp=C.map(bn,bo),bf.concat("; ",bp))+"|]";};s.printList=function(bn,bo){return"["+bf.concat("; ",D.map(bn,bo))+"]";};s.padNumLeft=function(bn,bo){var bp,bq;bp=C.get(bn,0);return((bp===" "?true:bp==="+")?true:bp==="-")?bp+(bq=bn.substr(1),bf.PadLeftWith(bq,bo-1,48)):bf.PadLeftWith(bn,bo,48);};s.spaceForPos=function(bn,bo){return 0<=bn?" "+bo:bo;};s.plusForPos=function(bn,bo){return 0<=bn?"+"+bo:bo;};s.toSafe=function(bn){return bn==null?"":bn;};u=t.AsyncBody=bl.Class({},null,u);u.New=function(bn,bo){return new u({k:bn,ct:bo});};v=t.Scheduler=bl.Class({tick:function(){var bn,bo=this,bp=a.Date.now();bn=true;while(bn){var bq;bq=this.robin.length;bq===0?(this.idle=true,void(bn=false)):((this.robin.shift())(),a.Date.now()-bp>40?(a.setTimeout(function(){bo.tick();},0),void(bn=false)):null);}},Fork:function(bn){var bo;bo=this;this.robin.push(bn);this.idle?(this.idle=false,a.setTimeout(function(){bo.tick();},0)):null;}},null,v);v.New=bl.Ctor(function(){this.idle=true;this.robin=[];null;},v);t.For=function(bn,bo){return t.Using(x.Get(bn),function(bp){return t.While(function(){return bp.MoveNext();},t.Delay(function(){return bo(bp.Current());}));});};t.While=function(bn,bo){return bn()?t.Bind(bo,function(){return t.While(bn,bo);}):t.Return();};t.Using=function(bn,bo){return t.TryFinally(bo(bn),function(){bn.Dispose();});};t.TryCancelled=function(bn,bo){return t.checkCancel(function(bp){bn(u.New(function(bq){bq.$==2?(bo(bq.$0),bp.k(bq)):bp.k(bq);},bp.ct));});};t.OnCancel=function(bn){return t.checkCancel(function(bo){bo.k({$:0,$0:t.Register(bo.ct,bn)});});};t.StartChild=function(bn,bo){return t.checkCancel(function(bp){var bq,br,bs,bt;bq=[true];br=[null];bs=[];bt=(bo!=null?bo.$==1:false)?{$:1,$0:a.setTimeout(function(){bq[0]=false;var bu={$:1,$0:new Z.New()};while(bs.length>0)(bs.shift())(bu);},bo.$0)}:null;t.scheduler().Fork(function(){bn(u.New(function(bu){if(bq[0]){br[0]={$:1,$0:bu};(bt!=null?bt.$==1:false)?a.clearTimeout(bt.$0):null;while(bs.length>0)(bs.shift())(bu);}},bp.ct));});bp.k({$:0,$0:t.checkCancel(function(bu){var bv;bq[0]?(bv=br[0],bv==null?bs.push(bu.k):bu.k(bv.$0)):bu.k({$:1,$0:new Z.New()});})});});};t.Parallel=function(bn){var bo;bo=C.ofSeq(bn);return C.length(bo)===0?t.Return([]):t.checkCancel(function(bp){var bq,br,bs,bt;bq=bo.length;br=[bq];bs=new a.Array(bq);bt=bl.Curried2(function(bu,bv){var bw,bx=[br[0],bv];switch(bx[0]===0?0:bx[0]===1?bx[1].$==0?1:(bw=[bx[0],bx[1]],3):bx[1].$==0?2:(bw=[bx[0],bx[1]],3)){case 0:break;case 1:C.set(bs,bu,bx[1].$0);br[0]=0;bp.k({$:0,$0:bs});break;case 2:C.set(bs,bu,bx[1].$0);br[0]=bx[0]-1;break;case 3:br[0]=0;bp.k(bw[1]);break;}});C.iteri(bl.Curried2(function(bu,bv){t.scheduler().Fork(function(){bv(u.New(bt(bu),bp.ct));});}),bo);});};t.Sleep=function(bn){return t.checkCancel(function(bo){var bp,bq,br,bs,bt,bu;bp=function(){return a.setTimeout(function(){_2.Force(bs).Dispose();t.scheduler().Fork(function(){bo.k({$:0,$0:null});});},bn);};bq=_2.Create(bp);br=function(){return t.Register(bo.ct,function(){var bv;bv=_2.Force(bq);a.clearTimeout(bv);t.scheduler().Fork(function(){bo.k({$:2,$0:new U.New(bo.ct)});});});};bs=_2.Create(br);bt=_2.Force(bq);bu=_2.Force(bs);});};t.StartAsTask=function(bn,bo){var bp;bp=new bi.New();t.StartWithContinuations(bn,function(bq){bp.SetResult(bq);},function(bq){bp.SetException$1(bq);},function(){bp.SetCanceled();},bo);return bp.get_Task();};t.AwaitTask1=function(bn){return t.FromContinuations(function(bo){var bp,bq,br;bp=bo[0];bq=bo[1];br=bo[2];bj.Equals(bn.get_Status(),0)?bn.Start():null;bn.ContinueWith$2(function(bs){return bs.get_IsCanceled()?br(U.New.call(this,t.noneCT())):bs.get_IsFaulted()?bq(bs.get_Exception()):bp(bs.get_Result());});});};t.AwaitTask=function(bn){return t.FromContinuations(function(bo){var bp,bq,br;bp=bo[0];bq=bo[1];br=bo[2];bj.Equals(bn.get_Status(),0)?bn.Start():null;bn.ContinueWith$2(function(bs){return bs.get_IsCanceled()?br(U.New.call(this,t.noneCT())):bs.get_IsFaulted()?bq(bs.get_Exception()):bp();});});};t.AwaitEvent=function(bn,bo){return t.checkCancel(function(bp){var bq,br,bs,bt,bu,bv;bq=function(){return O.subscribeTo(bn,function(bw){_2.Force(br).Dispose();_2.Force(bt).Dispose();t.scheduler().Fork(function(){bp.k({$:0,$0:bw});});});};br=_2.Create(bq);bs=function(){return t.Register(bp.ct,function(){(bo!=null?bo.$==1:false)?bo.$0():(_2.Force(br).Dispose(),t.scheduler().Fork(function(){bp.k({$:2,$0:new U.New(bp.ct)});}));});};bt=_2.Create(bs);bu=_2.Force(br);bv=_2.Force(bt);});};t.Start=function(bn,bo){t.StartWithContinuations(bn,function(){},function(bp){a.console.log.apply(a.console,["WebSharper: Uncaught asynchronous exception"].concat([bp]));},function(){},bo);};t.StartWithContinuations=function(bn,bo,bp,bq,br){var bs;bs=_6.DefaultArg(br,(t.defCTS())[0]);t.scheduler().Fork(function(){bn(u.New(function(bt){bt.$==1?bp(bt.$0):bt.$==2?bq(bt.$0):bo(bt.$0);},bs));});};t.FromContinuations=function(bn){return t.checkCancel(function(bo){var bp,bq;bp=[false];bq=function(br){bp[0]?_6.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times"):(bp[0]=true,t.scheduler().Fork(br));};bn([function(br){bq(function(){bo.k({$:0,$0:br});});},function(br){bq(function(){bo.k({$:1,$0:br});});},function(br){bq(function(){bo.k({$:2,$0:br});});}]);});};t.GetCT=function(){w.$cctor();return w.GetCT;};t.Catch=function(bn){return t.checkCancel(function(bo){try{bn(u.New(function(bp){bp.$==0?bo.k({$:0,$0:new I({$:0,$0:bp.$0})}):bp.$==1?bo.k({$:0,$0:new I({$:1,$0:bp.$0})}):bo.k(bp);},bo.ct));}catch(bp){bo.k({$:0,$0:new I({$:1,$0:bp})});}});};t.TryWith=function(bn,bo){return t.checkCancel(function(bp){bn(u.New(function(bq){if(bq.$==0)bp.k({$:0,$0:bq.$0});else if(bq.$==1)try{(bo(bq.$0))(bp);}catch(br){bp.k(bq);}else bp.k(bq);},bp.ct));});};t.TryFinally=function(bn,bo){return t.checkCancel(function(bp){bn(u.New(function(bq){try{bo();bp.k(bq);}catch(br){bp.k({$:1,$0:br});}},bp.ct));});};t.Delay=function(bn){return t.checkCancel(function(bo){try{(bn(null))(bo);}catch(bp){bo.k({$:1,$0:bp});}});};t.Ignore=function(bn){return t.Bind(bn,function(){return t.Return();});};t.Combine=function(bn,bo){return t.Bind(bn,function(){return bo;});};t.Bind=function(bn,bo){return t.checkCancel(function(bp){bn(u.New(function(bq){var br;bq.$==0?(br=bq.$0,t.scheduler().Fork(function(){try{(bo(br))(bp);}catch(bs){bp.k({$:1,$0:bs});}})):t.scheduler().Fork(function(){bp.k(bq);});},bp.ct));});};t.Return=function(bn){return t.checkCancel(function(bo){bo.k({$:0,$0:bn});});};t.checkCancel=function(bn){return function(bo){bo.ct.c?bo.k({$:2,$0:new U.New(bo.ct)}):bn(bo);};};t.defCTS=function(){w.$cctor();return w.defCTS;};t.scheduler=function(){w.$cctor();return w.scheduler;};t.Register=function(bn,bo){var bp;return bn===t.noneCT()?{Dispose:function(){return null;}}:(bp=bn.r.push(bo)-1,{Dispose:function(){return C.set(bn.r,bp,function(){});}});};t.noneCT=function(){w.$cctor();return w.noneCT;};w.$cctor=bl.Cctor(function(){w.noneCT={c:false,r:[]};w.scheduler=new v.New();w.defCTS=[new G.New()];w.GetCT=t.checkCancel(function(bn){bn.k({$:0,$0:bn.ct});});});y=x.T=bl.Class({Dispose:function(){this.d?this.d(this):null;},Current:function(){return this.c;},Current0:function(){return this.c;},MoveNext:function(){return this.n(this);}},null,y);y.New=bl.Ctor(function(bn,bo,bp,bq){this.s=bn;this.c=bo;this.n=bp;this.d=bq;null;},y);x.Get0=function(bn){return bn instanceof a.Array?x.ArrayEnumerator(bn):bj.Equals(typeof bn,"string")?x.StringEnumerator(bn):"GetEnumerator0"in bn?bn.GetEnumerator0():bn.GetEnumerator();};x.Get=function(bn){return bn instanceof a.Array?x.ArrayEnumerator(bn):bj.Equals(typeof bn,"string")?x.StringEnumerator(bn):bn.GetEnumerator();};x.StringEnumerator=function(bn){return new y.New(0,null,function(bo){var bp;bp=bo.s;return bp<bn.length?(bo.c=bn.charCodeAt(bp),bo.s=bp+1,true):false;},void 0);};x.ArrayEnumerator=function(bn){return new y.New(0,null,function(bo){var bp;bp=bo.s;return bp<C.length(bn)?(bo.c=C.get(bn,bp),bo.s=bp+1,true):false;},void 0);};A=z.SingleNode=bl.Class({ReplaceInDom:function(bn){this.node.parentNode.replaceChild(this.node,bn);}},null,A);A.New=bl.Ctor(function(bn){this.node=bn;null;},A);B.hasDocument=function(){return typeof a.document!=="undefined";};B.Activate=function(){var bn,bo;B.hasDocument()?(bn=a.document.getElementById("websharper-data"),bn?(bo=a.document,a.jQuery(bo)).ready(function(){var bp,bq,br,bs;bp=bn.getAttribute("content");bq=n.Activate(a.JSON.parse(bp));br=d.GetFields(bq);(bs=function(bt){var bu;bu=bt[1].Body();bu.ReplaceInDom(a.document.getElementById(bt[0]));},function(bt){C.iter(bs,bt);})(br);}):null):null;};C.splitInto=function(bn,bo){var bp,bq;bn<=0?_6.FailWith("Count must be positive"):null;var br=C.length(bo);if(br===0)bp=[];else{var bs=_6.Min(bn,br),bt=C.create(bs,null),bu=br/bs>>0;bq=0;var bv,bw;for(bv=0,bw=br%bs-1;bv<=bw;bv++){C.set(bt,bv,C.sub(bo,bq,bu+1));bq=bq+bu+1;}var bx,by;for(bx=br%bs,by=bs-1;bx<=by;bx++){C.set(bt,bx,C.sub(bo,bq,bu));bq=bq+bu;}bp=bt;}return bp;};C.contains=function(bn,bo){var bp,bq,br,bs;bq=true;br=0;var bt=C.length(bo);while(bq?br<bt:false)bj.Equals(C.get(bo,br),bn)?void(bq=false):void(br=br+1);bs=!bq;return bs;};C.tryFindBack=function(bn,bo){var bp,bq;bp=null;bq=bo.length-1;while(bq>0?bp==null:false){bn(C.get(bo,bq))?void(bp={$:1,$0:C.get(bo,bq)}):null;bq=bq-1;}return bp;};C.tryFindIndexBack=function(bn,bo){var bp,bq;bp=null;bq=bo.length-1;while(bq>0?bp==null:false){bn(C.get(bo,bq))?void(bp={$:1,$0:bq}):null;bq=bq-1;}return bp;};C.mapFold=function(bn,bo,bp){var bq,br,bs=(bq=bp.length,new a.Array(bq));br=bo;var bt,bu;for(bt=0,bu=bp.length-1;bt<=bu;bt++){var bv;bv=(bn(br))(C.get(bp,bt));bs[bt]=bv[0];br=bv[1];}return[bs,br];};C.mapFoldBack=function(bn,bo,bp){var bq,br,bs,bt,bu=(br=bo.length,new a.Array(br));bs=bp;var bw,bx,bv=bo.length;for(bw=1,bx=bv;bw<=bx;bw++){var by,bz;by=bv-bw;bz=(bn(C.get(bo,by)))(bs);bu[by]=bz[0];bs=bz[1];}bt=[bu,bs];return bt;};C.mapInPlace=function(bn,bo){var bp,bq;for(bp=0,bq=bo.length-1;bp<=bq;bp++)bo[bp]=bn(bo[bp]);};C.mapiInPlace=function(bn,bo){var bp,bq;for(bp=0,bq=bo.length-1;bp<=bq;bp++)bo[bp]=(bn(bp))(bo[bp]);return bo;};C.sortInPlaceByDescending=function(bn,bo){var bp,bq,br;bp=(bq=C.mapiInPlace(bl.Curried2(function(bs,bt){return[bt,[bn(bt),bs]];}),bo),bq.sort(bl.CreateFuncWithArgs(function(bs){return-_6.Compare(bs[0][1],bs[1][1]);})));(br=function(bs){return bs[0];},function(bs){C.mapInPlace(br,bs);})(bp);};D.tryHead=function(bn){var bo,bp=x.Get(bn);try{bo=bp.MoveNext()?{$:1,$0:bp.Current()}:null;}finally{"Dispose"in bp?bp.Dispose():null;}return bo;};D.tryItem=function(bn,bo){var bp,bq;if(bn<0)bp=null;else{bq=0;var br=x.Get(bo);try{var bs;bs=true;while(bs?bq<=bn:false)br.MoveNext()?void(bq=bq+1):void(bs=false);bp=bs?{$:1,$0:br.Current()}:null;}finally{"Dispose"in br?br.Dispose():null;}}return bp;};D.tryLast=function(bn){var bo,bp=x.Get(bn);try{var bq;if(bp.MoveNext()){while(bp.MoveNext());bq={$:1,$0:bp.Current()};}else bq=null;bo=bq;}finally{"Dispose"in bp?bp.Dispose():null;}return bo;};D.chunkBySize=function(bn,bo){bn<=0?_6.FailWith("Chunk size must be positive"):null;return{GetEnumerator:function(){var bp,bq;bp=x.Get(bo);bq=function(){bp.Dispose();};return new y.New(null,null,function(br){var bs;if(bp.MoveNext()){var bt=[bp.Current()];while(C.length(bt)<bn?bp.MoveNext():false)bt.push(bp.Current());br.c=bt;bs=true;}else bs=false;return bs;},bq);}};};D.compareWith=function(bn,bo,bp){var bq,br=x.Get(bo);try{var bs,bt=x.Get(bp);try{var bu,bv;bu=0;bv=true;while(bv?bu===0:false){var bw;bw=[br.MoveNext(),bt.MoveNext()];bw[0]?bw[1]?void(bu=(bn(br.Current()))(bt.Current())):void(bu=1):bw[1]?void(bu=-1):void(bv=false);}bs=bu;}finally{"Dispose"in bt?bt.Dispose():null;}bq=bs;}finally{"Dispose"in br?br.Dispose():null;}return bq;};D.countBy=function(bn,bo){return D.delay(function(){var bp,bq={},br=x.Get(bo);try{var bs,bt,bu,bv=[];while(br.MoveNext()){var bw,bx;bw=bn(br.Current());bx=bj.Hash(bw);bq.hasOwnProperty(bx)?void(bq[bx]=bq[bx]+1):(bv.push(bw),void(bq[bx]=1));}bp=(bs=(bt=bv.slice(0),(bu=function(by){return[by,bq[bj.Hash(by)]];},function(by){return C.map(bu,by);})(bt)),a.id(bs));}finally{"Dispose"in br?br.Dispose():null;}return bp;});};D.distinct=function(bn){return D.distinctBy(a.id,bn);};D.distinctBy=function(bn,bo){return{GetEnumerator:function(){var bp,bq,br,bs;bp=x.Get(bo);bq=a.Array.prototype.constructor.apply(a.Array,[]);br=function(bt){var bu,bv,bw;bu=bn(bt);bv=bj.Hash(bu);bw=bq[bv];return bj.Equals(bw,void 0)?(bq[bv]=[bu],true):C.contains(bu,bw)?false:(bw.push(bu),true);};bs=function(){bp.Dispose();};return new y.New(null,null,function(bt){var bu,bv,bw;if(bp.MoveNext()){bv=bp.Current();bw=br(bv);while(!bw?bp.MoveNext():false){bv=bp.Current();bw=br(bv);}bu=bw?(bt.c=bv,true):false;}else bu=false;return bu;},bs);}};};D.except=function(bn,bo){return{GetEnumerator:function(){var bp,bq=x.Get(bo),br=a.Array.prototype.constructor.apply(a.Array,[]),bs=function(bt){var bu,bv;bu=bj.Hash(bt);bv=br[bu];return bj.Equals(bv,void 0)?(br[bu]=[bt],true):C.contains(bt,bv)?false:(bv.push(bt),true);},bt=x.Get(bn);try{while(bt.MoveNext())bs(bt.Current());}finally{"Dispose"in bt?bt.Dispose():null;}bp=function(){bq.Dispose();};return new y.New(null,null,function(bu){var bv,bw,bx;if(bq.MoveNext()){bw=bq.Current();bx=bs(bw);while(!bx?bq.MoveNext():false){bw=bq.Current();bx=bs(bw);}bv=bx?(bu.c=bw,true):false;}else bv=false;return bv;},bp);}};};E.skip=function(bn,bo){var bp;bp=bo;var bq,br;for(bq=1,br=bn;bq<=br;bq++)bp.$==0?_6.FailWith("Input list too short."):void(bp=bp.$1);return bp;};D.groupBy=function(bn,bo){return D.delay(function(){var bp,bq={},br=[],bs=x.Get(bo);try{while(bs.MoveNext()){var bt,bu,bv;bt=bs.Current();bu=bn(bt);bv=bj.Hash(bu);!bq.hasOwnProperty(bv)?br.push(bu):null;({}[bv]=bu);bq.hasOwnProperty(bv)?bq[bv].push(bt):void(bq[bv]=[bt]);}bp=C.map(function(bw){return[bw,bq[bj.Hash(bw)]];},br);}finally{"Dispose"in bs?bs.Dispose():null;}return bp;});};D.insufficient=function(){return _6.FailWith("The input sequence has an insufficient number of elements.");};D.last=function(bn){var bo,bp=x.Get(bn);try{var bq;if(!bp.MoveNext())bq=D.insufficient();else{while(bp.MoveNext());bq=bp.Current();}bo=bq;}finally{"Dispose"in bp?bp.Dispose():null;}return bo;};E.map3=function(bn,bo,bp,bq){var br;br=C.map2(bl.Curried2(function(bs,bt){return bs(bt);}),C.map2(bn,C.ofList(bo),C.ofList(bp)),C.ofList(bq));return E.ofArray(br);};D.contains=function(bn,bo){var bp,bq=x.Get(bo);try{var br;br=false;while(!br?bq.MoveNext():false)br=bj.Equals(bq.Current(),bn);bp=br;}finally{"Dispose"in bq?bq.Dispose():null;}return bp;};D.pairwise=function(bn){var bo,bp;bo=D.windowed(2,bn);return(bp=function(bq){return[C.get(bq,0),C.get(bq,1)];},function(bq){return D.map(bp,bq);})(bo);};E.skipWhile=function(bn,bo){var bp;bp=bo;while(!(bp.$==0)?bn(E.head(bp)):false)bp=E.tail(bp);return bp;};D.unfold=function(bn,bo){return{GetEnumerator:function(){return new y.New(bo,null,function(bp){var bq;bq=bn(bp.s);return bq==null?false:(bp.c=bq.$0[0],bp.s=bq.$0[1],true);},void 0);}};};D.truncate=function(bn,bo){return D.delay(function(){return D.enumUsing(x.Get(bo),function(bp){var bq;bq=[0];return D.enumWhile(function(){return bp.MoveNext()?bq[0]<bn:false;},D.delay(function(){_5.incr(bq);return[bp.Current()];}));});});};D.nonNegative=function(){return _6.FailWith("The input must be non-negative.");};D.windowed=function(bn,bo){bn<=0?_6.FailWith("The input must be positive."):null;return D.delay(function(){return D.enumUsing(x.Get(bo),function(bp){var bq;bq=[];return D.append(D.enumWhile(function(){return bq.length<bn?bp.MoveNext():false;},D.delay(function(){bq.push(bp.Current());return[];})),D.delay(function(){return bq.length===bn?D.append([bq.slice(0)],D.delay(function(){return D.enumWhile(function(){return bp.MoveNext();},D.delay(function(){bq.shift();bq.push(bp.Current());return[bq.slice(0)];}));})):[];}));});});};C.checkBounds=function(bn,bo){(bo<0?true:bo>=bn.length)?_6.FailWith("Index was outside the bounds of the array."):null;};C.checkBounds2D=function(bn,bo,bp){if(((bo<0?true:bp<0)?true:bo>=bn.length)?true:bp>=(bn.length?bn[0].length:0)){var bq=new T.New();throw bq;}};C.checkRange=function(bn,bo,bp){((bp<0?true:bo<0)?true:bn.length<bo+bp)?_6.FailWith("Index was outside the bounds of the array."):null;};C.set=function(bn,bo,bp){C.checkBounds(bn,bo);bn[bo]=bp;};C.get=function(bn,bo){C.checkBounds(bn,bo);return bn[bo];};C.sub=function(bn,bo,bp){C.checkRange(bn,bo,bp);return bn.slice(bo,bo+bp);};C.setSub=function(bn,bo,bp,bq){var br,bs;for(br=0,bs=bp-1;br<=bs;br++)C.set(bn,bo+br,C.get(bq,br));};C.get2D=function(bn,bo,bp){C.checkBounds2D(bn,bo,bp);return bn[bo][bp];};C.set2D=function(bn,bo,bp,bq){C.checkBounds2D(bn,bo,bp);bn[bo][bp]=bq;};C.zeroCreate2D=function(bn,bo){var bp;bp=C.init(bn,function(){return C.create(bo,null);});bp.dims=2;return bp;};C.sub2D=function(bn,bo,bp,bq,br){var bv,bw,bs=bq<0?0:bq,bt=br<0?0:br,bu=C.zeroCreate2D(bs,bt);for(bv=0,bw=bs-1;bv<=bw;bv++){var bx,by;for(bx=0,by=bt-1;bx<=by;bx++)C.set2D(bu,bv,bx,C.get2D(bn,bo+bv,bp+bx));}return bu;};C.setSub2D=function(bn,bo,bp,bq,br,bs){var bt,bu;for(bt=0,bu=bq-1;bt<=bu;bt++){var bv,bw;for(bv=0,bw=br-1;bv<=bw;bv++)C.set2D(bn,bo+bt,bp+bv,C.get2D(bs,bt,bv));}};C.length=function(bn){return bn.dims===2?bn.length*bn.length:bn.length;};b.checkThis=function(bn){return bj.Equals(bn,null)?_6.InvalidOp("The initialization of an object or value resulted in an object or value being accessed recursively before it was fully initialized."):bn;};C.reverse=function(bn,bo,bp){var bq;bq=C.sub(bn,bo,bp).slice().reverse();C.blit(bq,0,bn,bo,C.length(bq));};C.sum=function(bn){var bo=0,bp=0;for(;bp<bn.length;bp++)bo+=bn[bp];return bo;};C.sumBy=function(bn,bo){var bp=0,bq=0;for(;bq<bo.length;bq++)bp+=bn(bo[bq]);return bp;};C.average=function(bn){var bo,bp;return(bo=C.sum(bn),a.Number(bo))/(bp=bn.length,a.Number(bp));};C.averageBy=function(bn,bo){var bp,bq;return(bp=C.sumBy(bn,bo),a.Number(bp))/(bq=bo.length,a.Number(bq));};C.blit=function(bn,bo,bp,bq,br){C.checkRange(bn,bo,br);C.checkRange(bp,bq,br);var bs,bt;for(bs=0,bt=br-1;bs<=bt;bs++)bp[bq+bs]=bn[bo+bs];};C.choose=function(bn,bo){var bq,br,bp=[];for(bq=0,br=bo.length-1;bq<=br;bq++){var bs;bs=bn(bo[bq]);bs==null?null:bp.push(bs.$0);}return bp;};C.collect=function(bn,bo){var bp;bp=C.map(bn,bo);return a.Array.prototype.concat.apply([],bp);};C.concat=function(bn){var bo;bo=C.ofSeq(bn);return a.Array.prototype.concat.apply([],bo);};C.create=function(bn,bo){var bq,br,bp=new a.Array(bn);for(bq=0,br=bn-1;bq<=br;bq++)bp[bq]=bo;return bp;};C.exists2=function(bn,bo,bp){C.checkLength(bo,bp);return D.exists2(bn,bo,bp);};C.fill=function(bn,bo,bp,bq){C.checkRange(bn,bo,bp);var br,bs;for(br=bo,bs=bo+bp-1;br<=bs;br++)bn[br]=bq;};C.filter=function(bn,bo){var bq,br,bp=[];for(bq=0,br=bo.length-1;bq<=br;bq++)bn(bo[bq])?bp.push(bo[bq]):null;return bp;};C.find=function(bn,bo){var bp;bp=C.tryFind(bn,bo);return bp==null?_6.FailWith("KeyNotFoundException"):bp.$0;};C.findINdex=function(bn,bo){var bp;bp=C.tryFindIndex(bn,bo);return bp==null?_6.FailWith("KeyNotFoundException"):bp.$0;};C.fold=function(bn,bo,bp){var bq;bq=bo;var br,bs;for(br=0,bs=bp.length-1;br<=bs;br++)bq=(bn(bq))(bp[br]);return bq;};C.fold2=function(bn,bo,bp,bq){var br;C.checkLength(bp,bq);br=bo;var bs,bt;for(bs=0,bt=bp.length-1;bs<=bt;bs++)br=((bn(br))(bp[bs]))(bq[bs]);return br;};C.foldBack=function(bn,bo,bp){var bq,br,bs;br=bp;var bu,bv,bt=bo.length;for(bu=1,bv=bt;bu<=bv;bu++)br=(bn(bo[bt-bu]))(br);bs=br;return bs;};C.foldBack2=function(bn,bo,bp,bq){var br,bs,bt;C.checkLength(bo,bp);var bu=bo.length;bt=bq;var bv,bw;for(bv=1,bw=bu;bv<=bw;bv++)bt=((bn(bo[bu-bv]))(bp[bu-bv]))(bt);bs=bt;return bs;};C.forall2=function(bn,bo,bp){C.checkLength(bo,bp);return D.forall2(bn,bo,bp);};C.init=function(bn,bo){bn<0?_6.FailWith("Negative size given."):null;var bq,br,bp=new a.Array(bn);for(bq=0,br=bn-1;bq<=br;bq++)bp[bq]=bo(bq);return bp;};C.iter=function(bn,bo){var bp,bq;for(bp=0,bq=bo.length-1;bp<=bq;bp++)bn(bo[bp]);};C.iter2=function(bn,bo,bp){C.checkLength(bo,bp);var bq,br;for(bq=0,br=bo.length-1;bq<=br;bq++)(bn(bo[bq]))(bp[bq]);};C.iteri=function(bn,bo){var bp,bq;for(bp=0,bq=bo.length-1;bp<=bq;bp++)(bn(bp))(bo[bp]);};C.iteri2=function(bn,bo,bp){C.checkLength(bo,bp);var bq,br;for(bq=0,br=bo.length-1;bq<=br;bq++)((bn(bq))(bo[bq]))(bp[bq]);};C.map=function(bn,bo){var bp,br,bs,bq=(bp=bo.length,new a.Array(bp));for(br=0,bs=bo.length-1;br<=bs;br++)bq[br]=bn(bo[br]);return bq;};C.map2=function(bn,bo,bp){var bq;C.checkLength(bo,bp);var bs,bt,br=(bq=bp.length,new a.Array(bq));for(bs=0,bt=bp.length-1;bs<=bt;bs++)br[bs]=(bn(bo[bs]))(bp[bs]);return br;};C.mapi=function(bn,bo){var bp,br,bs,bq=(bp=bo.length,new a.Array(bp));for(br=0,bs=bo.length-1;br<=bs;br++)bq[br]=(bn(br))(bo[br]);return bq;};C.mapi2=function(bn,bo,bp){var bq;C.checkLength(bo,bp);var bs,bt,br=(bq=bo.length,new a.Array(bq));for(bs=0,bt=bo.length-1;bs<=bt;bs++)br[bs]=((bn(bs))(bo[bs]))(bp[bs]);return br;};C.max=function(bn){return C.reduce(bl.Curried2(_6.Max),bn);};C.maxBy=function(bn,bo){return C.reduce(bl.Curried2(function(bp,bq){return bj.Compare(bn(bp),bn(bq))===1?bp:bq;}),bo);};C.min=function(bn){return C.reduce(bl.Curried2(_6.Min),bn);};C.minBy=function(bn,bo){return C.reduce(bl.Curried2(function(bp,bq){return bj.Compare(bn(bp),bn(bq))===-1?bp:bq;}),bo);};C.ofList=function(bn){var bo,bp=[];bo=bn;while(!(bo.$==0)){bp.push(E.head(bo));bo=E.tail(bo);}return bp;};C.ofSeq=function(bn){var bo;if(bn instanceof a.Array)bo=bn.slice();else if(bn instanceof _3)bo=C.ofList(bn);else{var bp=[],bq=x.Get(bn);try{while(bq.MoveNext())bp.push(bq.Current());bo=bp;}finally{"Dispose"in bq?bq.Dispose():null;}}return bo;};C.partition=function(bn,bo){var br,bs,bp=[],bq=[];for(br=0,bs=bo.length-1;br<=bs;br++)bn(bo[br])?bp.push(bo[br]):bq.push(bo[br]);return[bp,bq];};C.permute=function(bn,bo){var bp,br,bs,bq=(bp=bo.length,new a.Array(bp));for(br=0,bs=bo.length-1;br<=bs;br++)bq[bn(br)]=bo[br];return bq;};C.pick=function(bn,bo){var bp;bp=C.tryPick(bn,bo);return bp==null?_6.FailWith("KeyNotFoundException"):bp.$0;};C.reduce=function(bn,bo){var bp;C.nonEmpty(bo);bp=bo[0];var bq,br;for(bq=1,br=bo.length-1;bq<=br;bq++)bp=(bn(bp))(bo[bq]);return bp;};C.reduceBack=function(bn,bo){var bp,bq,br;C.nonEmpty(bo);var bs=bo.length;br=bo[bs-1];var bt,bu;for(bt=2,bu=bs;bt<=bu;bt++)br=(bn(bo[bs-bt]))(br);bq=br;return bq;};C.scan=function(bn,bo,bp){var bq,br=(bq=1+bp.length,new a.Array(bq));br[0]=bo;var bs,bt;for(bs=0,bt=bp.length-1;bs<=bt;bs++)br[bs+1]=(bn(br[bs]))(bp[bs]);return br;};C.scanBack=function(bn,bo,bp){var bq=bo.length,br=new a.Array(1+bq);br[bq]=bp;var bs,bt;for(bs=0,bt=bq-1;bs<=bt;bs++)br[bq-bs-1]=(bn(bo[bq-bs-1]))(br[bq-bs]);return br;};C.sort=function(bn){var bo,bp,bq;bo=(bp=C.mapi(bl.Curried2(function(br,bs){return[bs,br];}),bn),bp.sort(bl.CreateFuncWithArgs(function(br){return _6.Compare(br[0],br[1]);})));return(bq=function(br){return br[0];},function(br){return C.map(bq,br);})(bo);};C.sortBy=function(bn,bo){var bp,bq,br;bp=(bq=C.mapi(bl.Curried2(function(bs,bt){return[bt,[bn(bt),bs]];}),bo),bq.sort(bl.CreateFuncWithArgs(function(bs){return _6.Compare(bs[0][1],bs[1][1]);})));return(br=function(bs){return bs[0];},function(bs){return C.map(br,bs);})(bp);};C.sortInPlace=function(bn){var bo,bp,bq;bo=(bp=C.mapiInPlace(bl.Curried2(function(br,bs){return[bs,br];}),bn),bp.sort(bl.CreateFuncWithArgs(function(br){return _6.Compare(br[0],br[1]);})));(bq=function(br){return br[0];},function(br){C.mapInPlace(bq,br);})(bo);};C.sortInPlaceBy=function(bn,bo){var bp,bq,br;bp=(bq=C.mapiInPlace(bl.Curried2(function(bs,bt){return[bt,[bn(bt),bs]];}),bo),bq.sort(bl.CreateFuncWithArgs(function(bs){return _6.Compare(bs[0][1],bs[1][1]);})));(br=function(bs){return bs[0];},function(bs){C.mapInPlace(br,bs);})(bp);};C.sortInPlaceWith=function(bn,bo){bo.sort(bl.CreateFuncWithArgs(function(bp){return(bn(bp[0]))(bp[1]);}));};C.sortWith=function(bn,bo){var bp;bp=bo.slice();return bp.sort(bl.CreateFuncWithArgs(function(bq){return(bn(bq[0]))(bq[1]);}));};C.sortByDescending=function(bn,bo){var bp,bq,br;bp=(bq=C.mapi(bl.Curried2(function(bs,bt){return[bt,[bn(bt),bs]];}),bo),bq.sort(bl.CreateFuncWithArgs(function(bs){return-_6.Compare(bs[0][1],bs[1][1]);})));return(br=function(bs){return bs[0];},function(bs){return C.map(br,bs);})(bp);};C.sortDescending=function(bn){var bo,bp,bq;bo=(bp=C.mapi(bl.Curried2(function(br,bs){return[bs,br];}),bn),bp.sort(bl.CreateFuncWithArgs(function(br){return-_6.Compare(br[0],br[1]);})));return(bq=function(br){return br[0];},function(br){return C.map(bq,br);})(bo);};C.tryFind=function(bn,bo){var bp,bq;bp=null;bq=0;while(bq<bo.length?bp==null:false){bn(bo[bq])?void(bp={$:1,$0:bo[bq]}):null;bq=bq+1;}return bp;};C.tryFindIndex=function(bn,bo){var bp,bq;bp=null;bq=0;while(bq<bo.length?bp==null:false){bn(bo[bq])?void(bp={$:1,$0:bq}):null;bq=bq+1;}return bp;};C.tryHead=function(bn){return C.length(bn)===0?null:{$:1,$0:bn[0]};};C.tryItem=function(bn,bo){return(C.length(bo)<=bn?true:bn<0)?null:{$:1,$0:bo[bn]};};C.tryLast=function(bn){var bo;bo=C.length(bn);return bo===0?null:{$:1,$0:bn[bo-1]};};C.tryPick=function(bn,bo){var bp,bq;bp=null;bq=0;while(bq<bo.length?bp==null:false){var br;br=bn(bo[bq]);(br!=null?br.$==1:false)?void(bp=br):null;bq=bq+1;}return bp;};C.unzip=function(bn){var bq,br,bo=[],bp=[];for(bq=0,br=bn.length-1;bq<=br;bq++){var bs;bs=bn[bq];bo.push(bs[0]);bp.push(bs[1]);}return[bo,bp];};C.unzip3=function(bn){var br,bs,bo=[],bp=[],bq=[];for(br=0,bs=bn.length-1;br<=bs;br++){var bt;bt=bn[br];bo.push(bt[0]);bp.push(bt[1]);bq.push(bt[2]);}return[bo,bp,bq];};C.zip=function(bn,bo){C.checkLength(bn,bo);var bq,br,bp=C.create(bn.length,null);for(bq=0,br=bn.length-1;bq<=br;bq++)bp[bq]=[bn[bq],bo[bq]];return bp;};C.zip3=function(bn,bo,bp){C.checkLength(bn,bo);C.checkLength(bo,bp);var br,bs,bq=C.create(bn.length,null);for(br=0,bs=bn.length-1;br<=bs;br++)bq[br]=[bn[br],bo[br],bp[br]];return bq;};C.chunkBySize=function(bn,bo){var bp;bp=D.chunkBySize(bn,bo);return C.ofSeq(bp);};C.compareWith=function(bn,bo,bp){return D.compareWith(bn,bo,bp);};C.countBy=function(bn,bo){var bp;bp=D.countBy(bn,bo);return C.ofSeq(bp);};C.distinct=function(bn){var bo;bo=D.distinct(bn);return C.ofSeq(bo);};C.distinctBy=function(bn,bo){return C.ofSeq(D.distinctBy(bn,bo));};C.except=function(bn,bo){return C.ofSeq(D.except(bn,bo));};C.findBack=function(bn,bo){var bp;bp=C.tryFindBack(bn,bo);return bp==null?_6.FailWith("KeyNotFoundException"):bp.$0;};C.findIndexBack=function(bn,bo){var bp;bp=C.tryFindIndexBack(bn,bo);return bp==null?_6.FailWith("KeyNotFoundException"):bp.$0;};C.groupBy=function(bn,bo){var bp,bq,br;bp=(bq=D.groupBy(bn,bo),C.ofSeq(bq));return(br=function(bs){return[bs[0],C.ofSeq(bs[1])];},function(bs){return C.map(br,bs);})(bp);};C.head=function(bn){return E.head(E.ofArray(bn));};C.last=function(bn){return D.last(bn);};C.map3=function(bn,bo,bp,bq){var br;C.checkLength(bo,bp);C.checkLength(bo,bq);var bt,bu,bs=(br=bq.length,new a.Array(br));for(bt=0,bu=bq.length-1;bt<=bu;bt++)bs[bt]=((bn(bo[bt]))(bp[bt]))(bq[bt]);return bs;};C.pairwise=function(bn){var bo;bo=D.pairwise(bn);return C.ofSeq(bo);};C.replicate=function(bn,bo){return C.create(bn,bo);};C.indexed=function(bn){return C.mapi(bl.Curried2(function(bo,bp){return[bo,bp];}),bn);};C.skip=function(bn,bo){return bn<0?D.nonNegative():bn>C.length(bo)?D.insufficient():bo.slice(bn);};C.skipWhile=function(bn,bo){var bp,bq=C.length(bo);bp=0;while(bp<bq?bn(bo[bp]):false)bp=bp+1;return bo.slice(bp);};C.tail=function(bn){return C.skip(1,bn);};C.take=function(bn,bo){return bn<0?D.nonNegative():bn>C.length(bo)?D.insufficient():bo.slice(0,bn);};C.takeWhile=function(bn,bo){var bp,bq=C.length(bo);bp=0;while(bp<bq?bn(bo[bp]):false)bp=bp+1;return bo.slice(0,bp);};C.truncate=function(bn,bo){return bo.slice(bn);};C.exactlyOne=function(bn){return C.length(bn)===1?bn[0]:_6.FailWith("The input does not have precisely one element.");};C.unfold=function(bn,bo){return C.ofSeq(D.unfold(bn,bo));};C.windowed=function(bn,bo){var bp;bp=D.windowed(bn,bo);return C.ofSeq(bp);};C.splitAt=function(bn,bo){return[C.take(bn,bo),C.skip(bn,bo)];};C.nonEmpty=function(bn){bn.length===0?_6.FailWith("The input array was empty."):null;};C.checkLength=function(bn,bo){bn.length!==bo.length?_6.FailWith("The arrays have different lengths."):null;};F.init=function(bn,bo,bp){var br,bs,bq=C.zeroCreate2D(bn,bo);for(br=0,bs=bn-1;br<=bs;br++){var bt,bu;for(bt=0,bu=bo-1;bt<=bu;bt++)C.set2D(bq,br,bt,(bp(br))(bt));}return bq;};F.iter=function(bn,bo){var br,bs,bp=bo.length,bq=bo.length?bo[0].length:0;for(br=0,bs=bp-1;br<=bs;br++){var bt,bu;for(bt=0,bu=bq-1;bt<=bu;bt++)bn(C.get2D(bo,br,bt));}};F.iteri=function(bn,bo){var br,bs,bp=bo.length,bq=bo.length?bo[0].length:0;for(br=0,bs=bp-1;br<=bs;br++){var bt,bu;for(bt=0,bu=bq-1;bt<=bu;bt++)((bn(br))(bt))(C.get2D(bo,br,bt));}};F.map=function(bn,bo){return F.init(bo.length,bo.length?bo[0].length:0,bl.Curried2(function(bp,bq){return bn(C.get2D(bo,bp,bq));}));};F.mapi=function(bn,bo){return F.init(bo.length,bo.length?bo[0].length:0,bl.Curried2(function(bp,bq){return((bn(bp))(bq))(C.get2D(bo,bp,bq));}));};F.copy=function(bn){return F.init(bn.length,bn.length?bn[0].length:0,bl.Curried2(function(bo,bp){return C.get2D(bn,bo,bp);}));};G=b.CancellationTokenSource=bl.Class({CancelAfter:function(bn){var bo;bo=this;!this.c?(_8.iter(function(bp){a.clearTimeout(bp);},this.pending),this.pending={$:1,$0:a.setTimeout(function(){bo.Cancel$1();},bn)}):null;},Cancel:function(bn){var bo;!bn?this.Cancel$1():!this.c?(this.c=true,(bo=function(bp){bp();},function(bp){C.iter(bo,bp);})(this.r)):null;},Cancel$1:function(){var bn;if(!this.c){this.c=true;var bo=(bn=function(bp){var bq;try{bq=(bp(),null);}catch(br){bq={$:1,$0:br};}return bq;},function(bp){return C.choose(bn,bp);})(this.r);if(C.length(bo)>0){var bp=new Y.New$3(bo);throw bp;}}}},null,G);G.CreateLinkedTokenSource=function(bn,bo){return G.CreateLinkedTokenSource$1([bn,bo]);};G.CreateLinkedTokenSource$1=function(bn){var bo,bp;bo=new G.New();(bp=function(bq){var br;br=function(){bo.Cancel$1();};t.Register(bq,function(){br();});},function(bq){C.iter(bp,bq);})(bn);return bo;};G.New=bl.Ctor(function(){this.c=false;this.pending=null;this.r=[];null;},G);H.IsWhiteSpace=function(bn){return a.String.fromCharCode(bn).match(new a.RegExp("\\s"))!==null;};H.Parse=function(bn){return bn.length===1?bn.charCodeAt(0):_6.FailWith("String must be exactly one character long.");};H.IsUpper=function(bn){return bn>=65?bn<=90:false;};H.IsLower=function(bn){return bn>=97?bn<=122:false;};H.IsLetterOrDigit=function(bn){return H.IsLetter(bn)?true:H.IsDigit(bn);};H.IsLetter=function(bn){return(bn>=65?bn<=90:false)?true:bn>=97?bn<=122:false;};H.IsDigit=function(bn){return bn>=48?bn<=57:false;};H.IsControl=function(bn){return(bn>=0?bn<=31:false)?true:bn>=128?bn<=159:false;};H.GetNumericValue=function(bn){return(bn>=48?bn<=57:false)?a.Number(bn)-a.Number(48):-1;};I=b.Choice2=bl.Class({},null,I);J=b.Choice3=bl.Class({},null,J);K=b.Choice4=bl.Class({},null,K);L=b.Choice5=bl.Class({},null,L);M=b.Choice6=bl.Class({},null,M);N=b.Choice7=bl.Class({},null,N);O.addListener=function(bn,bo){bn.Subscribe(O.observer(bo));};O.subscribeTo=function(bn,bo){return bn.Subscribe(O.observer(bo));};O.observer=function(bn){return{OnNext:bn,OnError:function(){return null;},OnCompleted:function(){return null;}};};P.LongTime=function(bn){return(new a.Date(bn)).toLocaleTimeString({},{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:false});};P.ShortTime=function(bn){return(new a.Date(bn)).toLocaleTimeString({},{hour:"2-digit",minute:"2-digit",hour12:false});};P.LongDate=function(bn){return(new a.Date(bn)).toLocaleDateString({},{year:"numeric",month:"long",day:"numeric",weekday:"long"});};P.Parse=function(bn){var bo;bo=P.TryParse(bn);return(bo!=null?bo.$==1:false)?bo.$0:_6.FailWith("Failed to parse date string.");};P.TryParse=function(bn){var bo;bo=a.Date.parse(bn);return a.isNaN(bo)?null:{$:1,$0:bo};};P.AddMonths=function(bn,bo){var bp,bq,br,bs,bt,bu,bv,bw;bp=new a.Date(bn);return(bq=bp.getFullYear(),br=bp.getMonth()+bo,bs=bp.getDate(),bt=bp.getHours(),bu=bp.getMinutes(),bv=bp.getSeconds(),bw=bp.getMilliseconds(),new a.Date(bq,br,bs,bt,bu,bv,bw)).getTime();};P.AddYears=function(bn,bo){var bp,bq,br,bs,bt,bu,bv,bw;bp=new a.Date(bn);return(bq=bp.getFullYear()+bo,br=bp.getMonth(),bs=bp.getDate(),bt=bp.getHours(),bu=bp.getMinutes(),bv=bp.getSeconds(),bw=bp.getMilliseconds(),new a.Date(bq,br,bs,bt,bu,bv,bw)).getTime();};P.TimePortion=function(bn){var bo;bo=new a.Date(bn);return(((24*0+bo.getHours())*60+bo.getMinutes())*60+bo.getSeconds())*1000+bo.getMilliseconds();};P.DatePortion=function(bn){var bo,bp,bq,br;bo=new a.Date(bn);return(bp=bo.getFullYear(),bq=bo.getMonth(),br=bo.getDate(),new a.Date(bp,bq,br)).getTime();};R.InvocationList=function(bn){return bn.$Invokes||[bn];};R.RemoveAll=function(bn,bo){var bp,bq,br;bp=R.InvocationList(bn);C.length(R.InvocationList(bo))>1?_6.FailWith("TODO: Remove multicast delegates"):null;bq=(br=function(bs){return!bj.Equals(bs,bo);},function(bs){return C.filter(br,bs);})(bp);return bl.CreateDelegate(bq);};R.Remove=function(bn,bo){var bp,bq,br,bs,bt=R.InvocationList(bn);C.length(R.InvocationList(bo))>1?_6.FailWith("TODO: Remove multicast delegates"):null;var bu=[];br=false;var bv,bw;for(bv=C.length(bt)-1,bw=0;bv>=bw;bv--){var bx;bx=C.get(bt,bv);(!br?bl.DelegateEqual(bx,bo):false)?void(br=true):bl.Apply(bu,[]).unshift(bx);}bq=(bs=bl.Apply(bu,[]),bl.CreateDelegate(bs));return bq;};R.DelegateTarget=function(bn){var bo;return!bn?null:"$Target"in bn?bn.$Target:"$Invokes"in bn?(bo=bn.$Invokes,(C.get(bo,C.length(bo)-1))[1]):null;};S=b.MatchFailureException=bl.Class({},a.Error,S);S.New=bl.Ctor(function(bn,bo,bp){this.message=bn+" at "+a.String(bo)+":"+a.String(bp);null;},S);T=b.IndexOutOfRangeException=bl.Class({},a.Error,T);T.New=bl.Ctor(function(){T.New$1.call(this,"Index was outside the bounds of the array.");},T);T.New$1=bl.Ctor(function(bn){this.message=bn;null;},T);U=b.OperationCanceledException=bl.Class({},a.Error,U);U.New=bl.Ctor(function(bn){U.New$1.call(this,"The operation was canceled.",null,bn);},U);U.New$1=bl.Ctor(function(bn,bo,bp){this.message=bn;this.ct=bp;null;},U);V=b.ArgumentException=bl.Class({},a.Error,V);V.New=bl.Ctor(function(bn,bo){V.New$2.call(this,bo+"\nParameter name: "+bn);},V);V.New$1=bl.Ctor(function(){V.New$2.call(this,"Value does not fall within the expected range.");},V);V.New$2=bl.Ctor(function(bn){this.message=bn;null;},V);W=b.ArgumentOutOfRangeException=bl.Class({},a.Error,W);W.New=bl.Ctor(function(){W.New$1.call(this,"Specified argument was out of the range of valid values.");},W);W.New$1=bl.Ctor(function(bn){this.message=bn;null;},W);X=b.InvalidOperationException=bl.Class({},a.Error,X);X.New=bl.Ctor(function(){X.New$1.call(this,"Operation is not valid due to the current state of the object.");},X);X.New$1=bl.Ctor(function(bn){this.message=bn;null;},X);Y=b.AggregateException=bl.Class({},a.Error,Y);Y.New=bl.Ctor(function(bn,bo){Y.New$4.call(this,bn,[bo]);},Y);Y.New$1=bl.Ctor(function(bn,bo){Y.New$4.call(this,bn,C.ofSeq(bo));},Y);Y.New$2=bl.Ctor(function(bn){Y.New$4.call(this,"One or more errors occurred.",C.ofSeq(bn));},Y);Y.New$3=bl.Ctor(function(bn){Y.New$4.call(this,"One or more errors occurred.",bn);},Y);Y.New$4=bl.Ctor(function(bn,bo){this.message=bn;this.innerExceptions=bo;null;},Y);Z=b.TimeoutException=bl.Class({},a.Error,Z);Z.New=bl.Ctor(function(){Z.New$1.call(this,"The operation has timed out.");},Z);Z.New$1=bl.Ctor(function(bn){this.message=bn;null;},Z);_0=b.FormatException=bl.Class({},a.Error,_0);_0.New=bl.Ctor(function(){_0.New$1.call(this,"One of the identified items was in an invalid format.");},_0);_0.New$1=bl.Ctor(function(bn){this.message=bn;null;},_0);C.create2D=function(bn){var bo,bp,bq;bo=(bp=(bq=D.map(C.ofSeq,bn),C.ofSeq(bq)),a.id(bp));bo.dims=2;return bo;};_1.NewGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(new a.RegExp("[xy]","g"),function(bn){var bo=a.Math.random()*16|0,bp=bn=="x"?bo:bo&3|8;return bp.toString(16);});};_2.Force=function(bn){return bn.e();};_2.CreateFromValue=function(bn){return{v:bn,c:true,e:function(){return bn;},e:function(){return bn;}};};_2.Create=function(bn){var bo;bo={v:void 0,c:false,e:bn};bo.e=function(){return bo.c?bo.v:(bo.c=true,bo.v=bn(),bo.v);};return bo;};_3=E.T=bl.Class({GetSlice:function(bn,bo){var bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz;bp=[bn,bo];return(bq=bp[0],bq!=null?bq.$==1:false)?(br=bp[1],br!=null?br.$==1:false)?(bs=bp[0].$0,bt=(bu=E.skip(bs,this),(bv=bp[1].$0-bs+1,function(bA){return D.take(bv,bA);})(bu)),E.ofSeq(bt)):(bw=bp[0].$0,E.skip(bw,this)):(bx=bp[1],bx!=null?bx.$==1:false)?(by=(bz=bp[1].$0+1,function(bA){return D.take(bz,bA);})(this),E.ofSeq(by)):this;},get_Item:function(bn){return D.nth(bn,this);},get_Length:function(){var bn,bo;bn=this;bo=0;while(bn.$==1){bn=E.tail(bn);bo=bo+1;}return bo;},GetEnumerator:function(){return new y.New(this,null,function(bn){var bo;bo=bn.s;return bo.$==0?false:(bn.c=bo.$0,bn.s=bo.$1,true);},void 0);},GetEnumerator0:function(){return x.Get(this);}},null,_3);_3.Construct=function(bn,bo){return new _3({$:1,$0:bn,$1:bo});};_3.Nil=function(){return new _3({$:0});};E.append=function(bn,bo){var bp,bq,br,bs;if(bn.$==0)bp=bo;else{var bt=new _3({$:0});bq=bt;br=bn;bs=true;while(bs){E.setValue(bq,br.$0);br=br.$1;br.$==0?void(bs=false):void(bq=E.setTail(bq,new _3({$:0})));}E.setTail(bq,bo);bp=bt;}return bp;};E.choose=function(bn,bo){return E.ofSeq(D.choose(bn,bo));};E.collect=function(bn,bo){return E.ofSeq(D.collect(bn,bo));};E.concat=function(bn){return E.ofSeq(D.concat(bn));};E.exists2=function(bn,bo,bp){return D.exists2(bn,bo,bp);};E.filter=function(bn,bo){return E.ofSeq(D.filter(bn,bo));};E.fold2=function(bn,bo,bp,bq){return C.fold2(bn,bo,C.ofList(bp),C.ofList(bq));};E.foldBack=function(bn,bo,bp){return C.foldBack(bn,C.ofList(bo),bp);};E.foldBack2=function(bn,bo,bp,bq){return C.foldBack2(bn,C.ofList(bo),C.ofList(bp),bq);};E.forall2=function(bn,bo,bp){return C.forall2(bn,C.ofList(bo),C.ofList(bp));};E.head=function(bn){return bn.$==1?bn.$0:E.listEmpty();};E.init=function(bn,bo){return E.ofArray(C.init(bn,bo));};E.iter=function(bn,bo){var bp;bp=bo;while(bp.$==1){bn(E.head(bp));bp=E.tail(bp);}};E.iter2=function(bn,bo,bp){var bq,br;bq=bo;br=bp;while(bq.$==1){br.$==0?E.badLengths():null;(bn(E.head(bq)))(E.head(br));bq=E.tail(bq);br=E.tail(br);}br.$==1?E.badLengths():null;};E.iteri=function(bn,bo){var bp,bq;bp=bo;bq=0;while(bp.$==1){(bn(bq))(E.head(bp));bp=E.tail(bp);bq=bq+1;}};E.iteri2=function(bn,bo,bp){var bq,br,bs;bq=bo;br=bp;bs=0;while(bq.$==1){br.$==0?E.badLengths():null;((bn(bs))(E.head(bq)))(E.head(br));bq=E.tail(bq);br=E.tail(br);bs=bs+1;}br.$==1?E.badLengths():null;};E.map=function(bn,bo){var bp,bq,br=new _3({$:0});bp=br;bq=bo;while(bq.$==1){E.setValue(bp,bn(bq.$0));bp=E.setTail(bp,new _3({$:0}));bq=bq.$1;}return br;};E.map2=function(bn,bo,bp){var bq,br,bs,bt=new _3({$:0});bq=bt;br=bo;bs=bp;while(br.$==1?bs.$==1:false){E.setValue(bq,(bn(br.$0))(bs.$0));bq=E.setTail(bq,new _3({$:0}));br=br.$1;bs=bs.$1;}(br.$==1?true:bs.$==1)?E.badLengths():null;return bt;};E.mapi=function(bn,bo){var bp,bq,br,bs=new _3({$:0});bp=bs;bq=bo;br=0;while(bq.$==1){E.setValue(bp,(bn(br))(bq.$0));bp=E.setTail(bp,new _3({$:0}));bq=bq.$1;br=br+1;}return bs;};E.mapi2=function(bn,bo,bp){var bq,br,bs,bt,bu=new _3({$:0});bq=bu;br=bo;bs=bp;bt=0;while(br.$==1?bs.$==1:false){E.setValue(bq,((bn(bt))(br.$0))(bs.$0));bq=E.setTail(bq,new _3({$:0}));br=br.$1;bs=bs.$1;bt=bt+1;}(br.$==1?true:bs.$==1)?E.badLengths():null;return bu;};E.max=function(bn){return D.reduce(bl.Curried2(_6.Max),bn);};E.maxBy=function(bn,bo){return D.reduce(bl.Curried2(function(bp,bq){return bj.Compare(bn(bp),bn(bq))===1?bp:bq;}),bo);};E.min=function(bn){return D.reduce(bl.Curried2(_6.Min),bn);};E.minBy=function(bn,bo){return D.reduce(bl.Curried2(function(bp,bq){return bj.Compare(bn(bp),bn(bq))===-1?bp:bq;}),bo);};E.ofArray=function(bn){var bo;bo=new _3({$:0});var bp,bq;for(bp=C.length(bn)-1,bq=0;bp>=bq;bp--)bo=new _3({$:1,$0:C.get(bn,bp),$1:bo});return bo;};E.ofSeq=function(bn){var bo,bp;if(bn instanceof _3)bo=bn;else if(bn instanceof a.Array)bo=E.ofArray(bn);else{var bq=new _3({$:0});bp=bq;var br=x.Get(bn);try{while(br.MoveNext()){E.setValue(bp,br.Current());bp=E.setTail(bp,new _3({$:0}));}bp.$=0;bo=bq;}finally{"Dispose"in br?br.Dispose():null;}}return bo;};E.partition=function(bn,bo){var bp;bp=C.partition(bn,C.ofList(bo));return[E.ofArray(bp[0]),E.ofArray(bp[1])];};E.permute=function(bn,bo){return E.ofArray(C.permute(bn,C.ofList(bo)));};E.reduceBack=function(bn,bo){return C.reduceBack(bn,C.ofList(bo));};E.replicate=function(bn,bo){return E.ofArray(C.create(bn,bo));};E.rev=function(bn){var bo,bp;bo=new _3({$:0});bp=bn;while(bp.$==1){bo=new _3({$:1,$0:bp.$0,$1:bo});bp=bp.$1;}return bo;};E.scan=function(bn,bo,bp){return E.ofSeq(D.scan(bn,bo,bp));};E.scanBack=function(bn,bo,bp){return E.ofArray(C.scanBack(bn,C.ofList(bo),bp));};E.sort=function(bn){var bo;bo=C.ofList(bn);C.sortInPlace(bo);return E.ofArray(bo);};E.sortBy=function(bn,bo){return E.sortWith(bl.Curried2(function(bp,bq){return _6.Compare(bn(bp),bn(bq));}),bo);};E.sortByDescending=function(bn,bo){return E.sortWith(bl.Curried2(function(bp,bq){return-_6.Compare(bn(bp),bn(bq));}),bo);};E.sortDescending=function(bn){var bo;bo=C.ofList(bn);C.sortInPlaceByDescending(a.id,bo);return E.ofArray(bo);};E.sortWith=function(bn,bo){var bp;bp=C.ofList(bo);C.sortInPlaceWith(bn,bp);return E.ofArray(bp);};E.tail=function(bn){return bn.$==1?bn.$1:E.listEmpty();};E.unzip=function(bn){var bo=[],bp=[],bq=x.Get(bn);try{while(bq.MoveNext()){var br;br=bq.Current();bo.push(br[0]);bp.push(br[1]);}}finally{"Dispose"in bq?bq.Dispose():null;}return[E.ofArray(bo.slice(0)),E.ofArray(bp.slice(0))];};E.unzip3=function(bn){var bo=[],bp=[],bq=[],br=x.Get(bn);try{while(br.MoveNext()){var bs;bs=br.Current();bo.push(bs[0]);bp.push(bs[1]);bq.push(bs[2]);}}finally{"Dispose"in br?br.Dispose():null;}return[E.ofArray(bo.slice(0)),E.ofArray(bp.slice(0)),E.ofArray(bq.slice(0))];};E.zip=function(bn,bo){return E.ofArray(C.zip(C.ofList(bn),C.ofList(bo)));};E.zip3=function(bn,bo,bp){return E.ofArray(C.zip3(C.ofList(bn),C.ofList(bo),C.ofList(bp)));};E.chunkBySize=function(bn,bo){var bp,bq;bp=(bq=D.chunkBySize(bn,bo),E.ofSeq(bq));return E.map(E.ofArray,bp);};E.compareWith=function(bn,bo,bp){return D.compareWith(bn,bo,bp);};E.countBy=function(bn,bo){var bp;bp=D.countBy(bn,bo);return E.ofSeq(bp);};E.distinct=function(bn){var bo;bo=D.distinct(bn);return E.ofSeq(bo);};E.distinctBy=function(bn,bo){return E.ofSeq(D.distinctBy(bn,bo));};E.splitInto=function(bn,bo){var bp,bq;bp=(bq=C.splitInto(bn,C.ofList(bo)),E.ofArray(bq));return E.map(E.ofArray,bp);};E.except=function(bn,bo){return E.ofSeq(D.except(bn,bo));};E.tryFindBack=function(bn,bo){return C.tryFindBack(bn,C.ofList(bo));};E.findBack=function(bn,bo){var bp;bp=E.tryFindBack(bn,bo);return bp==null?_6.FailWith("KeyNotFoundException"):bp.$0;};E.findIndexBack=function(bn,bo){var bp;bp=C.tryFindIndexBack(bn,C.ofList(bo));return bp==null?_6.FailWith("KeyNotFoundException"):bp.$0;};E.groupBy=function(bn,bo){var bp,bq,br;bp=(bq=D.groupBy(bn,bo),E.ofSeq(bq));return(br=function(bs){return[bs[0],E.ofSeq(bs[1])];},function(bs){return E.map(br,bs);})(bp);};E.last=function(bn){var bo,bp;bn.$==0?E.listEmpty():null;bo=bn;bp=bo.$1;while(bp.$==1){bo=bp;bp=bo.$1;}return bo.$0;};E.contains=function(bn,bo){return D.contains(bn,bo);};E.mapFold=function(bn,bo,bp){var bq;bq=C.mapFold(bn,bo,C.ofList(bp));return[E.ofArray(bq[0]),bq[1]];};E.mapFoldBack=function(bn,bo,bp){var bq;bq=C.mapFoldBack(bn,C.ofList(bo),bp);return[E.ofArray(bq[0]),bq[1]];};E.pairwise=function(bn){var bo;bo=D.pairwise(bn);return E.ofSeq(bo);};E.indexed=function(bn){return E.mapi(bl.Curried2(function(bo,bp){return[bo,bp];}),bn);};E.singleton=function(bn){return E.ofArray([bn]);};E.tryHead=function(bn){return bn.$==0?null:{$:1,$0:bn.$0};};E.tryItem=function(bn,bo){return D.tryItem(bn,bo);};E.tryLast=function(bn){return D.tryLast(bn);};E.exactlyOne=function(bn){var bo;return(bn.$==1?bn.$1.$==0?(bo=bn.$0,true):false:false)?bo:_6.FailWith("The input does not have precisely one element.");};E.unfold=function(bn,bo){return E.ofSeq(D.unfold(bn,bo));};E.windowed=function(bn,bo){var bp,bq;bp=(bq=D.windowed(bn,bo),D.map(E.ofArray,bq));return E.ofSeq(bp);};E.splitAt=function(bn,bo){var bp;return[(bp=D.take(bn,bo),E.ofSeq(bp)),E.skip(bn,bo)];};E.setTail=function(bn,bo){bn.$1=bo;return bo;};E.setValue=function(bn,bo){bn.$=1;bn.$0=bo;};E.listEmpty=function(){return _6.FailWith("The input list was empty.");};E.badLengths=function(){return _6.FailWith("The lists have different lengths.");};_4.getOrValue=function(bn,bo){return bn==null?bo:bn;};_4.get=function(bn){return bn==null?_6.FailWith("Nullable object must have a value."):bn;};_5.decr=function(bn){bn[0]--;};_5.incr=function(bn){bn[0]++;};_6.range=function(bn,bo){var bp;bp=1+bo-bn;return bp<=0?[]:D.init(bp,function(bq){return bq+bn;});};_6.step=function(bn,bo,bp){var bq,br,bs,bt;bq=_6.Sign(bo);br=(bs=D.initInfinite(function(bu){return bn+bu*bo;}),(bt=function(bu){return bq*(bp-bu)>=0;},function(bu){return D.takeWhile(bt,bu);})(bs));return a.id(br);};_6.KeyValue=function(bn){return[bn.K,bn.V];};_6.Using=function(bn,bo){var bp;try{bp=bo(bn);}finally{bn.Dispose();}return bp;};_6.Truncate=function(bn){return bn<0?a.Math.ceil(bn):a.Math.floor(bn);};_6.Sign=function(bn){return bn===0?0:bn<0?-1:1;};_6.Pown=function(bn,bo){var bp;bp=function(bq){var br;return bq===1?bn:bq%2===0?(br=bp(bq/2>>0),br*br):bn*bp(bq-1);};return bp(bo);};_6.Min=function(bn,bo){return bj.Compare(bn,bo)===-1?bn:bo;};_6.Max=function(bn,bo){return bj.Compare(bn,bo)===1?bn:bo;};_6.InvalidArg=function(bn,bo){var bp=new V.New(bn,bo);throw bp;};_6.InvalidOp=function(bn){var bo=new X.New$1(bn);throw bo;};_6.FailWith=function(bn){var bo=a.Error(bn);throw bo;};_6.DefaultArg=function(bn,bo){return bn==null?bo:bn.$0;};_6.Compare=function(bn,bo){return bj.Compare(bn,bo);};_7.string=function(bn,bo,bp){var bq,br;bq=[bo,bp];return bq[0]==null?(br=bq[1],br!=null?br.$==1:false)?bn.slice(0,bq[1].$0+1):"":bq[1]==null?bn.slice(bq[0].$0):bn.slice(bq[0].$0,bq[1].$0+1);};_7.array=function(bn,bo,bp){var bq,br;bq=[bo,bp];return bq[0]==null?(br=bq[1],br!=null?br.$==1:false)?bn.slice(0,bq[1].$0+1):[]:bq[1]==null?bn.slice(bq[0].$0):bn.slice(bq[0].$0,bq[1].$0+1);};_7.setArray=function(bn,bo,bp,bq){var br,bs;br=(bo!=null?bo.$==1:false)?bo.$0:0;bs=(bp!=null?bp.$==1:false)?bp.$0:bn.length-1;C.setSub(bn,br,bs-br+1,bq);};_7.array2D=function(bn,bo,bp,bq,br){var bs,bt,bu,bv;bs=(bo!=null?bo.$==1:false)?bo.$0:0;bt=(bq!=null?bq.$==1:false)?bq.$0:0;bu=(bp!=null?bp.$==1:false)?bp.$0:bn.length-1;bv=(br!=null?br.$==1:false)?br.$0:(bn.length?bn[0].length:0)-1;return C.sub2D(bn,bs,bt,bu-bs+1,bv-bt+1);};_7.array2Dfix1=function(bn,bo,bp,bq){var bv,bw,br=(bp!=null?bp.$==1:false)?bp.$0:0,bs=(bq!=null?bq.$==1:false)?bq.$0:(bn.length?bn[0].length:0)-1,bt=bs-br+1,bu=new a.Array(bt);for(bv=0,bw=bt-1;bv<=bw;bv++)C.set(bu,bv,C.get2D(bn,bo,br+bv));return bu;};_7.array2Dfix2=function(bn,bo,bp,bq){var bv,bw,br=(bo!=null?bo.$==1:false)?bo.$0:0,bs=(bp!=null?bp.$==1:false)?bp.$0:bn.length-1,bt=bs-br+1,bu=new a.Array(bt);for(bv=0,bw=bt-1;bv<=bw;bv++)C.set(bu,bv,C.get2D(bn,br+bv,bq));return bu;};_7.setArray2Dfix1=function(bn,bo,bp,bq,br){var bu,bv,bs=(bp!=null?bp.$==1:false)?bp.$0:0,bt=(bq!=null?bq.$==1:false)?bq.$0:(bn.length?bn[0].length:0)-1;for(bu=0,bv=bt-bs+1-1;bu<=bv;bu++)C.set2D(bn,bo,bs+bu,C.get(br,bu));};_7.setArray2Dfix2=function(bn,bo,bp,bq,br){var bu,bv,bs=(bo!=null?bo.$==1:false)?bo.$0:0,bt=(bp!=null?bp.$==1:false)?bp.$0:bn.length-1;for(bu=0,bv=bt-bs+1-1;bu<=bv;bu++)C.set2D(bn,bs+bu,bq,C.get(br,bu));};_7.setArray2D=function(bn,bo,bp,bq,br,bs){var bt,bu,bv,bw;bt=(bo!=null?bo.$==1:false)?bo.$0:0;bu=(bq!=null?bq.$==1:false)?bq.$0:0;bv=(bp!=null?bp.$==1:false)?bp.$0:bn.length-1;bw=(br!=null?br.$==1:false)?br.$0:(bn.length?bn[0].length:0)-1;C.setSub2D(bn,bt,bu,bv-bt+1,bw-bu+1,bs);};_8.bind=function(bn,bo){return bo==null?null:bn(bo.$0);};_8.exists=function(bn,bo){return bo==null?false:bn(bo.$0);};_8.fold=function(bn,bo,bp){return bp==null?bo:(bn(bo))(bp.$0);};_8.foldBack=function(bn,bo,bp){return bo==null?bp:(bn(bo.$0))(bp);};_8.forall=function(bn,bo){return bo==null?true:bn(bo.$0);};_8.iter=function(bn,bo){bo==null?null:bn(bo.$0);};_8.map=function(bn,bo){return bo==null?null:{$:1,$0:bn(bo.$0)};};_8.toArray=function(bn){return bn==null?[]:[bn.$0];};_8.toList=function(bn){return bn==null?new _3({$:0}):E.ofArray([bn.$0]);};_8.ofObj=function(bn){return bn==null?null:{$:1,$0:bn};};_8.toObj=function(bn){return bn==null?null:bn.$0;};_8.ofNullable=function(bn){return bn==null?null:{$:1,$0:_4.get(bn)};};_8.toNullable=function(bn){return(bn!=null?bn.$==1:false)?bn.$0:null;};_8.filter=function(bn,bo){var bp;return(bo!=null?bo.$==1:false)?(bp=bo.$0,bn(bp)?{$:1,$0:bp}:null):null;};_9.CopyTo=function(bn,bo,bp){C.blit(bn,0,bo,bp,C.length(bn));};_9.Contains=function(bn,bo){return D.exists(function(bp){return bj.Equals(bo,bp);},bn);};_9.Clear=function(bn){bn.splice(0,C.length(bn));};_=b.Random=bl.Class({NextBytes:function(bn){var bo,bp;for(bo=0,bp=C.length(bn)-1;bo<=bp;bo++)C.set(bn,bo,a.Math.floor(a.Math.random()*256));},Next:function(bn,bo){return bn>bo?_6.FailWith("'minValue' cannot be greater than maxValue."):bn+a.Math.floor(a.Math.random()*(bo-bn));},Next$1:function(bn){return bn<0?_6.FailWith("'maxValue' must be greater than zero."):a.Math.floor(a.Math.random()*bn);},Next$2:function(){return a.Math.floor(a.Math.random()*2147483648);}},null,_);_.New=bl.Ctor(function(){},_);bc.New=function(bn){return{"0":bn};};D.enumFinally=function(bn,bo){return{GetEnumerator:function(){var bp,bq;try{bp=x.Get(bn);}catch(br){bo();throw br;bp=void 0;}bq=function(){bp.Dispose();bo();};return new y.New(null,null,function(bs){return bp.MoveNext()?(bs.c=bp.Current(),true):false;},bq);}};};D.enumUsing=function(bn,bo){return{GetEnumerator:function(){var bp,bq;try{bp=x.Get(bo(bn));}catch(br){bn.Dispose();throw br;bp=void 0;}bq=function(){bp.Dispose();bn.Dispose();};return new y.New(null,null,function(bs){return bp.MoveNext()?(bs.c=bp.Current(),true):false;},bq);}};};D.enumWhile=function(bn,bo){return{GetEnumerator:function(){var bp;bp=function(bq){var br;br=bq.s;return bj.Equals(br,null)?bn()?(bq.s=x.Get(bo),bp(bq)):false:br.MoveNext()?(bq.c=br.Current(),true):(br.Dispose(),bq.s=null,bp(bq));};return new y.New(null,null,bp,function(bq){var br;br=bq.s;!bj.Equals(br,null)?br.Dispose():null;});}};};bd.createEvent=function(bn,bo,bp){return{Subscribe:function(bq){var br;br=bp(bl.Curried2(function(bs,bt){bq.OnNext(bt);}));bn(br);return{Dispose:function(){return bo(br);}};},RemoveHandler:bo,AddHandler:bn};};D.append=function(bn,bo){return{GetEnumerator:function(){var bp,bq;bp=x.Get(bn);bq=[true];return new y.New(bp,null,function(br){var bs;return br.s.MoveNext()?(br.c=br.s.Current(),true):(bs=br.s,!bj.Equals(bs,null)?bs.Dispose():null,br.s=null,bq[0]?(bq[0]=false,br.s=x.Get(bo),br.s.MoveNext()?(br.c=br.s.Current(),true):(br.s.Dispose(),br.s=null,false)):false);},function(br){var bs;bs=br.s;!bj.Equals(bs,null)?bs.Dispose():null;});}};};D.average=function(bn){var bo,bp;bo=D.fold(function(bq){var br,bs;br=bq[0];bs=bq[1];return function(bt){return[br+1,bs+bt];};},[0,0],bn);bp=bo[0];return bp===0?_6.InvalidArg("source","The input sequence was empty."):bo[1]/bp;};D.averageBy=function(bn,bo){var bp,bq;bp=D.fold(function(br){var bs,bt;bs=br[0];bt=br[1];return function(bu){return[bs+1,bt+bn(bu)];};},[0,0],bo);bq=bp[0];return bq===0?_6.InvalidArg("source","The input sequence was empty."):bp[1]/bq;};D.cache=function(bn){var bo,bp;bo=[];bp=[x.Get(bn)];return{GetEnumerator:function(){return new y.New(0,null,function(bq){var br;return bq.s+1<bo.length?(bq.s=bq.s+1,bq.c=bo[bq.s],true):(br=bp[0],bj.Equals(br,null)?false:br.MoveNext()?(bq.s=bq.s+1,bq.c=br.Current(),bo.push(bq.c),true):(br.Dispose(),bp[0]=null,false));},void 0);}};};D.choose=function(bn,bo){var bp;return(bp=function(bq){var br;br=bn(bq);return br==null?new _3({$:0}):E.ofArray([br.$0]);},function(bq){return D.collect(bp,bq);})(bo);};D.collect=function(bn,bo){return D.concat(D.map(bn,bo));};D.concat=function(bn){return{GetEnumerator:function(){var bo,bp=x.Get(bn);bo=function(bq){var br;br=bq.s;return bj.Equals(br,null)?bp.MoveNext()?(bq.s=x.Get(bp.Current()),bo(bq)):(bp.Dispose(),false):br.MoveNext()?(bq.c=br.Current(),true):(bq.Dispose(),bq.s=null,bo(bq));};return new y.New(null,null,bo,function(bq){var br;br=bq.s;!bj.Equals(br,null)?br.Dispose():null;!bj.Equals(bp,null)?bp.Dispose():null;});}};};D.delay=function(bn){return{GetEnumerator:function(){return x.Get(bn());}};};D.splitInto=function(bn,bo){bn<=0?_6.FailWith("Count must be positive"):null;return D.delay(function(){var bp;bp=C.splitInto(bn,C.ofSeq(bo));return a.id(bp);});};D.exactlyOne=function(bn){var bo,bp=x.Get(bn);try{var bq;bo=bp.MoveNext()?(bq=bp.Current(),bp.MoveNext()?_6.InvalidOp("Sequence contains more than one element"):bq):_6.InvalidOp("Sequence contains no elements");}finally{"Dispose"in bp?bp.Dispose():null;}return bo;};D.exists=function(bn,bo){var bp,bq=x.Get(bo);try{var br;br=false;while(!br?bq.MoveNext():false)br=bn(bq.Current());bp=br;}finally{"Dispose"in bq?bq.Dispose():null;}return bp;};D.exists2=function(bn,bo,bp){var bq,br=x.Get(bo);try{var bs,bt=x.Get(bp);try{var bu;bu=false;while((!bu?br.MoveNext():false)?bt.MoveNext():false)bu=(bn(br.Current()))(bt.Current());bs=bu;}finally{"Dispose"in bt?bt.Dispose():null;}bq=bs;}finally{"Dispose"in br?br.Dispose():null;}return bq;};D.filter=function(bn,bo){return{GetEnumerator:function(){var bp,bq;bp=x.Get(bo);bq=function(){bp.Dispose();};return new y.New(null,null,function(br){var bs,bt,bu;bs=bp.MoveNext();bt=bp.Current();bu=false;while(bs)bn(bt)?(br.c=bt,bu=true,void(bs=false)):bp.MoveNext()?void(bt=bp.Current()):void(bs=false);return bu;},bq);}};};D.find=function(bn,bo){var bp;bp=D.tryFind(bn,bo);return bp==null?_6.FailWith("KeyNotFoundException"):bp.$0;};D.findIndex=function(bn,bo){var bp;bp=D.tryFindIndex(bn,bo);return bp==null?_6.FailWith("KeyNotFoundException"):bp.$0;};D.fold=function(bn,bo,bp){var bq,br;br=bo;var bs=x.Get(bp);try{while(bs.MoveNext())br=(bn(br))(bs.Current());bq=br;}finally{"Dispose"in bs?bs.Dispose():null;}return bq;};D.forall=function(bn,bo){return!D.exists(function(bp){return!bn(bp);},bo);};D.forall2=function(bn,bo,bp){return!D.exists2(bl.Curried2(function(bq,br){return!(bn(bq))(br);}),bo,bp);};D.head=function(bn){var bo,bp=x.Get(bn);try{bo=bp.MoveNext()?bp.Current():D.insufficient();}finally{"Dispose"in bp?bp.Dispose():null;}return bo;};D.init=function(bn,bo){return D.take(bn,D.initInfinite(bo));};D.initInfinite=function(bn){return{GetEnumerator:function(){return new y.New(0,null,function(bo){bo.c=bn(bo.s);bo.s=bo.s+1;return true;},void 0);}};};D.isEmpty=function(bn){var bo,bp=x.Get(bn);try{bo=!bp.MoveNext();}finally{"Dispose"in bp?bp.Dispose():null;}return bo;};D.iter=function(bn,bo){var bp=x.Get(bo);try{while(bp.MoveNext())bn(bp.Current());}finally{"Dispose"in bp?bp.Dispose():null;}};D.iter2=function(bn,bo,bp){var bq=x.Get(bo);try{var br,bs=x.Get(bp);try{while(bq.MoveNext()?bs.MoveNext():false)(bn(bq.Current()))(bs.Current());br=void 0;}finally{"Dispose"in bs?bs.Dispose():null;}}finally{"Dispose"in bq?bq.Dispose():null;}};D.iteri=function(bn,bo){var bp;bp=0;var bq=x.Get(bo);try{while(bq.MoveNext()){(bn(bp))(bq.Current());bp=bp+1;}}finally{"Dispose"in bq?bq.Dispose():null;}};D.length=function(bn){var bo,bp;bp=0;var bq=x.Get(bn);try{while(bq.MoveNext())bp=bp+1;bo=bp;}finally{"Dispose"in bq?bq.Dispose():null;}return bo;};D.map=function(bn,bo){return{GetEnumerator:function(){var bp,bq;bp=x.Get(bo);bq=function(){bp.Dispose();};return new y.New(null,null,function(br){return bp.MoveNext()?(br.c=bn(bp.Current()),true):false;},bq);}};};D.mapi=function(bn,bo){return D.map2(bn,D.initInfinite(a.id),bo);};D.map2=function(bn,bo,bp){return{GetEnumerator:function(){var bq,br,bs;bq=x.Get(bo);br=x.Get(bp);bs=function(){bq.Dispose();br.Dispose();};return new y.New(null,null,function(bt){return(bq.MoveNext()?br.MoveNext():false)?(bt.c=(bn(bq.Current()))(br.Current()),true):false;},bs);}};};D.maxBy=function(bn,bo){return D.reduce(bl.Curried2(function(bp,bq){return bj.Compare(bn(bp),bn(bq))>=0?bp:bq;}),bo);};D.minBy=function(bn,bo){return D.reduce(bl.Curried2(function(bp,bq){return bj.Compare(bn(bp),bn(bq))<=0?bp:bq;}),bo);};D.max=function(bn){return D.reduce(bl.Curried2(function(bo,bp){return bj.Compare(bo,bp)>=0?bo:bp;}),bn);};D.min=function(bn){return D.reduce(bl.Curried2(function(bo,bp){return bj.Compare(bo,bp)<=0?bo:bp;}),bn);};D.nth=function(bn,bo){var bp,bq;bn<0?_6.FailWith("negative index requested"):null;bq=-1;var br=x.Get(bo);try{while(bq<bn){!br.MoveNext()?D.insufficient():null;bq=bq+1;}bp=br.Current();}finally{"Dispose"in br?br.Dispose():null;}return bp;};D.pick=function(bn,bo){var bp;bp=D.tryPick(bn,bo);return bp==null?_6.FailWith("KeyNotFoundException"):bp.$0;};D.readOnly=function(bn){return{GetEnumerator:function(){return x.Get(bn);}};};D.reduce=function(bn,bo){var bp,bq=x.Get(bo);try{var br;!bq.MoveNext()?_6.FailWith("The input sequence was empty"):null;br=bq.Current();while(bq.MoveNext())br=(bn(br))(bq.Current());bp=br;}finally{"Dispose"in bq?bq.Dispose():null;}return bp;};D.scan=function(bn,bo,bp){return{GetEnumerator:function(){var bq,br;bq=x.Get(bp);br=function(){bq.Dispose();};return new y.New(false,null,function(bs){return bs.s?bq.MoveNext()?(bs.c=(bn(bs.c))(bq.Current()),true):false:(bs.c=bo,bs.s=true,true);},br);}};};D.skip=function(bn,bo){return{GetEnumerator:function(){var bp;bp=x.Get(bo);return new y.New(true,null,function(bq){if(bq.s){var br,bs;for(br=1,bs=bn;br<=bs;br++)!bp.MoveNext()?D.insufficient():null;bq.s=false;}return bp.MoveNext()?(bq.c=bp.Current(),true):false;},function(){bp.Dispose();});}};};D.skipWhile=function(bn,bo){return{GetEnumerator:function(){var bp;bp=x.Get(bo);return new y.New(true,null,function(bq){var br,bs,bt;if(bq.s){bs=true;bt=false;while(bs)bp.MoveNext()?!bn(bp.Current())?void(bs=false):null:(bs=false,void(bt=true));bq.s=false;br=bt?false:(bq.c=bp.Current(),true);}else br=bp.MoveNext()?(bq.c=bp.Current(),true):false;return br;},function(){bp.Dispose();});}};};D.sort=function(bn){return D.sortBy(a.id,bn);};D.sortBy=function(bn,bo){return D.delay(function(){var bp;bp=C.ofSeq(bo);C.sortInPlaceBy(bn,bp);return bp;});};D.sortByDescending=function(bn,bo){return D.delay(function(){var bp;bp=C.ofSeq(bo);C.sortInPlaceByDescending(bn,bp);return bp;});};D.sortDescending=function(bn){return D.sortByDescending(a.id,bn);};D.sum=function(bn){return D.fold(bl.Curried2(function(bo,bp){return bo+bp;}),0,bn);};D.sumBy=function(bn,bo){return D.fold(bl.Curried2(function(bp,bq){return bp+bn(bq);}),0,bo);};D.take=function(bn,bo){bn<0?D.nonNegative():null;return{GetEnumerator:function(){var bp;bp=[x.Get(bo)];return new y.New(0,null,function(bq){var br;bq.s=bq.s+1;return bq.s>bn?false:(br=bp[0],bj.Equals(br,null)?D.insufficient():br.MoveNext()?(bq.c=br.Current(),bq.s===bn?(br.Dispose(),void(bp[0]=null)):null,true):(br.Dispose(),bp[0]=null,D.insufficient()));},function(){var bq;bq=bp[0];!bj.Equals(bq,null)?bq.Dispose():null;});}};};D.takeWhile=function(bn,bo){return D.delay(function(){return D.enumUsing(x.Get(bo),function(bp){return D.enumWhile(function(){return bp.MoveNext()?bn(bp.Current()):false;},D.delay(function(){return[bp.Current()];}));});});};D.tryFind=function(bn,bo){var bp,bq=x.Get(bo);try{var br;br=null;while(br==null?bq.MoveNext():false){var bs;bs=bq.Current();bn(bs)?void(br={$:1,$0:bs}):null;}bp=br;}finally{"Dispose"in bq?bq.Dispose():null;}return bp;};D.findBack=function(bn,bo){var bp;bp=C.tryFindBack(bn,C.ofSeq(bo));return bp==null?_6.FailWith("KeyNotFoundException"):bp.$0;};D.tryFindIndex=function(bn,bo){var bp,bq=x.Get(bo);try{var br,bs;br=true;bs=0;while(br?bq.MoveNext():false)bn(bq.Current())?void(br=false):void(bs=bs+1);bp=br?null:{$:1,$0:bs};}finally{"Dispose"in bq?bq.Dispose():null;}return bp;};D.findIndexBack=function(bn,bo){var bp;bp=C.tryFindIndexBack(bn,C.ofSeq(bo));return bp==null?_6.FailWith("KeyNotFoundException"):bp.$0;};D.tryPick=function(bn,bo){var bp,bq=x.Get(bo);try{var br;br=null;while(bj.Equals(br,null)?bq.MoveNext():false)br=bn(bq.Current());bp=br;}finally{"Dispose"in bq?bq.Dispose():null;}return bp;};D.zip=function(bn,bo){return D.map2(bl.Curried2(function(bp,bq){return[bp,bq];}),bn,bo);};D.zip3=function(bn,bo,bp){return D.map2(bl.Curried2(function(bq,br){return[bq,br[0],br[1]];}),bn,D.zip(bo,bp));};D.fold2=function(bn,bo,bp,bq){return C.fold2(bn,bo,C.ofSeq(bp),C.ofSeq(bq));};D.foldBack=function(bn,bo,bp){return C.foldBack(bn,C.ofSeq(bo),bp);};D.foldBack2=function(bn,bo,bp,bq){return C.foldBack2(bn,C.ofSeq(bo),C.ofSeq(bp),bq);};D.iteri2=function(bn,bo,bp){var bq;bq=0;var br=x.Get(bo);try{var bs,bt=x.Get(bp);try{while(br.MoveNext()?bt.MoveNext():false){((bn(bq))(br.Current()))(bt.Current());bq=bq+1;}bs=void 0;}finally{"Dispose"in bt?bt.Dispose():null;}}finally{"Dispose"in br?br.Dispose():null;}};D.map3=function(bn,bo,bp,bq){return{GetEnumerator:function(){var br,bs,bt,bu;br=x.Get(bo);bs=x.Get(bp);bt=x.Get(bq);bu=function(){br.Dispose();bs.Dispose();bt.Dispose();};return new y.New(null,null,function(bv){return((br.MoveNext()?bs.MoveNext():false)?bt.MoveNext():false)?(bv.c=((bn(br.Current()))(bs.Current()))(bt.Current()),true):false;},bu);}};};D.mapi2=function(bn,bo,bp){return D.map3(bn,D.initInfinite(a.id),bo,bp);};D.mapFold=function(bn,bo,bp){var bq;bq=C.mapFold(bn,bo,C.ofSeq(bp));return[bq[0],bq[1]];};D.mapFoldBack=function(bn,bo,bp){var bq;bq=C.mapFoldBack(bn,C.ofSeq(bo),bp);return[bq[0],bq[1]];};D.permute=function(bn,bo){return D.delay(function(){return C.permute(bn,C.ofSeq(bo));});};D.reduceBack=function(bn,bo){return C.reduceBack(bn,C.ofSeq(bo));};D.replicate=function(bn,bo){bn<0?D.nonNegative():null;return D.delay(function(){return D.map(function(){return bo;},_6.range(0,bn-1));});};D.rev=function(bn){return D.delay(function(){var bo;bo=C.ofSeq(bn).slice().reverse();return a.id(bo);});};D.scanBack=function(bn,bo,bp){return D.delay(function(){return C.scanBack(bn,C.ofSeq(bo),bp);});};D.indexed=function(bn){return D.mapi(bl.Curried2(function(bo,bp){return[bo,bp];}),bn);};D.sortWith=function(bn,bo){return D.delay(function(){var bp;bp=C.ofSeq(bo);C.sortInPlaceWith(bn,bp);return bp;});};D.tail=function(bn){return D.skip(1,bn);};be.CopyTo=function(bn,bo,bp){C.blit(bo,0,bo,bp,C.length(bn));};be.Contains=function(bn,bo){return D.exists(function(bp){return bj.Equals(bo,bp);},bn);};be.Clear=function(bn){bn.splice(0,C.length(bn));};bf.RegexEscape=function(bn){return bn.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};bf.SplitWith=function(bn,bo){return bn.split(bo);};bf.Join=function(bn,bo){return bo.join(bn);};bf.TrimEndWS=function(bn){return bn.replace(new a.RegExp("\\s+$"),"");};bf.TrimStartWS=function(bn){return bn.replace(new a.RegExp("^\\s+"),"");};bf.Trim=function(bn){return bn.replace(new a.RegExp("^\\s+"),"").replace(new a.RegExp("\\s+$"),"");};bf.StartsWith=function(bn,bo){return bn.substring(0,bo.length)==bo;};bf.Substring=function(bn,bo,bp){return bn.substr(bo,bp);};bf.ReplaceOnce=function(bn,bo,bp){return bn.replace(bo,bp);};bf.Remove=function(bn,bo,bp){return bn.substring(0,bo)+bn.substring(bo+bp);};bf.PadRightWith=function(bn,bo,bp){return bo>bn.length?bn+a.Array(bo-bn.length+1).join(a.String.fromCharCode(bp)):bn;};bf.PadLeftWith=function(bn,bo,bp){return bo>bn.length?a.Array(bo-bn.length+1).join(a.String.fromCharCode(bp))+bn:bn;};bf.LastIndexOf=function(bn,bo,bp){return bn.lastIndexOf(a.String.fromCharCode(bo),bp);};bf.IsNullOrWhiteSpace=function(bn){return bn==null||(new a.RegExp("^\\s*$")).test(bn);};bf.IsNullOrEmpty=function(bn){return bn==null||bn=="";};bf.Insert=function(bn,bo,bp){return bn.substring(0,bo-1)+bp+bn.substring(bo);};bf.IndexOf=function(bn,bo,bp){return bn.indexOf(a.String.fromCharCode(bo),bp);};bf.EndsWith=function(bn,bo){return bn.substring(bn.length-bo.length)==bo;};bf.collect=function(bn,bo){return C.init(bo.length,function(bp){return bn(bo.charCodeAt(bp));}).join("");};bf.concat=function(bn,bo){return C.ofSeq(bo).join(bn);};bf.exists=function(bn,bo){return D.exists(bn,bf.protect(bo));};bf.forall=function(bn,bo){return D.forall(bn,bf.protect(bo));};bf.init=function(bn,bo){return C.init(bn,bo).join("");};bf.iter=function(bn,bo){D.iter(bn,bf.protect(bo));};bf.iteri=function(bn,bo){D.iteri(bn,bf.protect(bo));};bf.length=function(bn){return bf.protect(bn).length;};bf.map=function(bn,bo){return bf.collect(function(bp){return bm.fromCharCode(bn(bp));},bf.protect(bo));};bf.mapi=function(bn,bo){return C.ofSeq(D.mapi(bl.Curried2(function(bp,bq){return bm.fromCharCode((bn(bp))(bq));}),bo)).join("");};bf.replicate=function(bn,bo){return bf.init(bn,function(){return bo;});};bf.protect=function(bn){return bn===null?"":bn;};bf.SFormat=function(bn,bo){var bp,bq;bp=new a.RegExp("{(0|[1-9]\\d*)(?:,(-?[1-9]\\d*|0))?(?::(.*?))?}","g");return(bq=function(br,bs,bt){var bu,bv,bw;bu=bm(C.get(bo,+bs));return!bj.Equals(bt,void 0)?(bv=+bt,bw=a.Math.abs(bv),bw>bu.length?bv>0?bf.PadLeft(bu,bw):bf.PadRight(bu,bw):bu):bu;},function(br){return br.replace(bp,bq);})(bn);};bf.Filter=function(bn,bo){var bp,bq;return(bp=(bq=function(br){return bn(br)?{$:1,$0:bm.fromCharCode(br)}:null;},function(br){return D.choose(bq,br);})(bo),C.ofSeq(bp)).join("");};bf.SplitStrings=function(bn,bo,bp){var bq;bq=bf.concat("|",C.map(bf.RegexEscape,bo));return bf.Split(bn,new a.RegExp(bq),bp);};bf.SplitChars=function(bn,bo,bp){var bq;bq="["+bf.RegexEscape(a.String.fromCharCode.apply(void 0,bo))+"]";return bf.Split(bn,new a.RegExp(bq),bp);};bf.Split=function(bn,bo,bp){var bq;bq=bf.SplitWith(bn,bo);return bp===1?C.filter(function(br){return br!=="";},bq):bq;};bf.TrimEnd=function(bn,bo){var bp,bq,br,bs;if(bj.Equals(bo,null)?true:bo.length==0)bp=bf.TrimEndWS(bn);else{bq=bn.length-1;br=true;while(bq>=0?br:false)(function(){var bt,bu;bt=bn.charCodeAt(bq);return(bu=function(bv){return bt===bv;},function(bv){return D.exists(bu,bv);})(bo)?void(bq=bq-1):void(br=false);}());bp=(bs=bq+1,bf.Substring(bn,0,bs));}return bp;};bf.TrimStart=function(bn,bo){var bp,bq,br;if(bj.Equals(bo,null)?true:bo.length==0)bp=bf.TrimStartWS(bn);else{bq=0;br=true;while(bq<bn.length?br:false)(function(){var bs,bt;bs=bn.charCodeAt(bq);return(bt=function(bu){return bs===bu;},function(bu){return D.exists(bt,bu);})(bo)?void(bq=bq+1):void(br=false);}());bp=bn.substring(bq);}return bp;};bf.ToCharArrayRange=function(bn,bo,bp){return C.init(bp,function(bq){return bn.charCodeAt(bo+bq);});};bf.ToCharArray=function(bn){return C.init(bn.length,function(bo){return bn.charCodeAt(bo);});};bf.ReplaceChar=function(bn,bo,bp){return bf.Replace(bn,bm.fromCharCode(bo),bm.fromCharCode(bp));};bf.Replace=function(bn,bo,bp){var bq;bq=function(br){var bs,bt,bu,bv;bs=br.indexOf(bo);return bs!==-1?(bt=bf.ReplaceOnce(br,bo,bp),bu=bs+bp.length,(bv=bs+bp.length,bf.Substring(bt,0,bv))+bq(bt.substring(bu))):br;};return bq(bn);};bf.PadRight=function(bn,bo){return bf.PadRightWith(bn,bo,32);};bf.PadLeft=function(bn,bo){return bf.PadLeftWith(bn,bo,32);};bf.CopyTo=function(bn,bo,bp,bq,br){C.blit(bf.ToCharArray(bn),bo,bp,bq,br);};bf.Compare=function(bn,bo){return _6.Compare(bn,bo);};bg=b.Task=bl.Class({Execute:function(){this.action();},Start:function(){var bn;bn=this;bj.Equals(this.status,0)?(this.status=2,t.scheduler().Fork(function(){bn.status=3;try{bn.Execute();bn.status=5;}catch(bo){var bp;(bo instanceof U?bj.Equals(bo.ct,bn.token)?(bp=bo,true):false:false)?(a.console.log.apply(a.console,["Task cancellation caught:"].concat([bp])),bn.exc=new Y.New$3([bp]),bn.status=6):(a.console.log.apply(a.console,["Task error caught:"].concat([bo])),bn.exc=new Y.New$3([bo]),bn.status=7);}bn.RunContinuations();})):_6.InvalidOp("Task not in initial state");},StartContinuation:function(){var bn;bn=this;bj.Equals(this.status,1)?(this.status=2,t.scheduler().Fork(function(){if(bj.Equals(bn.status,2)){bn.status=3;try{bn.Execute();bn.status=5;}catch(bo){bn.exc=new Y.New$3([bo]);bn.status=7;}bn.RunContinuations();}})):null;},ContinueWith:function(bn,bo){var bp,bq;bp=this;bq=new bh.New(function(){return bn(bp);},bo,1,null,void 0);this.get_IsCompleted()?bq.StartContinuation():this.continuations.push(bq);return bq;},ContinueWith$1:function(bn,bo){var bp,bq;bp=this;bq=new bg.New$2(function(){bn(bp);},bo,1,null);this.get_IsCompleted()?bq.StartContinuation():this.continuations.push(bq);return bq;},ContinueWith$2:function(bn){return this.ContinueWith$1(bn,t.noneCT());},RunContinuations:function(){var bo,bp,bn=this.continuations;for(bo=0,bp=bn.length-1;bo<=bp;bo++)C.get(bn,bo).StartContinuation();},OnCompleted:function(bn){this.get_IsCompleted()?bn():(bj.Equals(this.get_Status(),0)?this.Start():null,this.ContinueWith$2(bn));},get_Status:function(){return this.status;},get_IsFaulted:function(){return bj.Equals(this.status,7);},get_IsCompleted:function(){return(bj.Equals(this.status,5)?true:bj.Equals(this.status,7))?true:bj.Equals(this.status,6);},get_IsCanceled:function(){return bj.Equals(this.status,6);},get_Exception:function(){return this.exc;}},null,bg);bg.WhenAll=function(bn){var bs,bt,bo=C.length(bn),bp=[0],bq=new a.Array(bo),br=new bi.New();for(bs=0,bt=bo-1;bs<=bt;bs++)(function(bu){return C.get(bn,bs).ContinueWith$2(function(bv){return bv.get_IsFaulted()?br.TrySetException$1(bv.get_Exception()):bv.get_IsCanceled()?br.TrySetCanceled$1():(_5.incr(bp),bq[bu]=bv.get_Result(),bp[0]===bo?br.SetResult(bq):null);});}(bs));return br.get_Task();};bg.WhenAll$1=function(bn){var br,bs,bo=C.length(bn),bp=[0],bq=new bi.New();for(br=0,bs=bo-1;br<=bs;br++)C.get(bn,br).ContinueWith$2(function(bt){return bt.get_IsFaulted()?bq.TrySetException$1(bt.get_Exception()):bt.get_IsCanceled()?bq.TrySetCanceled$1():(_5.incr(bp),bp[0]===bo?bq.TrySetResult():null);});return bq.get_Task();};bg.WhenAny=function(bn){var bp,bq,bo=new bi.New();for(bp=0,bq=bn.length-1;bp<=bq;bp++){var br;br=C.get(bn,bp);br.ContinueWith(function(bs){return bo.TrySetResult(bs);},t.noneCT());}return bo.get_Task();};bg.WhenAny$1=function(bn){var bp,bq,bo=new bi.New();for(bp=0,bq=bn.length-1;bp<=bq;bp++){var br;br=C.get(bn,bp);br.ContinueWith$2(function(bs){return bo.TrySetResult(bs);});}return bo.get_Task();};bg.Delay=function(bn,bo){var bp;bp=t.Sleep(bn);return t.StartAsTask(bp,{$:1,$0:bo});};bg.Delay$1=function(bn){var bo;bo=t.Sleep(bn);return t.StartAsTask(bo,null);};bg.Run=function(bn,bo){var bp;bp=bn();return bo.c?bg.FromCanceled(bo):(bj.Equals(bp.get_Status(),0)?bp.Start():null,bp);};bg.Run$1=function(bn,bo){var bp;bp=new bh.New(bn,bo,0,null,void 0);bp.Start();return bp;};bg.Run$2=function(bn,bo){var bp;bp=bn();return bo.c?bg.FromCanceled$1(bo):(bj.Equals(bp.get_Status(),0)?bp.Start():null,bp);};bg.Run$3=function(bn,bo){var bp;bp=new bg.New$2(bn,bo,0,null);bp.Start();return bp;};bg.FromResult=function(bn){return new bh.New(null,t.noneCT(),5,null,bn);};bg.FromException=function(bn){return new bh.New(null,t.noneCT(),7,new Y.New$3([bn]),null);};bg.FromException$1=function(bn){return new bg.New$2(null,t.noneCT(),7,new Y.New$3([bn]));};bg.FromCanceled=function(bn){return new bh.New(null,bn,6,null,null);};bg.FromCanceled$1=function(bn){return new bg.New$2(null,bn,6,null);};bg.New=bl.Ctor(function(bn,bo){bg.New$2.call(this,bn,bo,0,null);},bg);bg.New$1=bl.Ctor(function(bn){bg.New$2.call(this,bn,t.noneCT(),0,null);},bg);bg.New$2=bl.Ctor(function(bn,bo,bp,bq){this.action=bn;this.token=bo;this.status=bp;this.continuations=[];this.exc=bq;null;},bg);bh=b.Task1=bl.Class({get_Result:function(){return this.result;},Execute:function(){this.result=this.func();}},bg,bh);bh.New=bl.Ctor(function(bn,bo,bp,bq,br){bg.New$2.call(this,null,bo,bp,bq);this.func=bn;this.result=br;null;},bh);bi=b.TaskCompletionSource=bl.Class({TrySetResult:function(bn){return!this.task.get_IsCompleted()?(this.task.status=5,this.task.result=bn,this.task.RunContinuations(),true):false;},TrySetException:function(bn){return this.TrySetException$1(new Y.New$2(bn));},TrySetException$1:function(bn){return!this.task.get_IsCompleted()?(this.task.status=7,this.task.exc=new Y.New$3([bn]),this.task.RunContinuations(),true):false;},TrySetCanceled:function(bn){return!this.task.get_IsCompleted()?(this.task.status=6,this.task.RunContinuations(),true):false;},TrySetCanceled$1:function(){return!this.task.get_IsCompleted()?(this.task.status=6,this.task.RunContinuations(),true):false;},SetResult:function(bn){this.task.get_IsCompleted()?_6.FailWith("Task already completed."):null;this.task.status=5;this.task.result=bn;this.task.RunContinuations();},SetException:function(bn){this.SetException$1(new Y.New$2(bn));},SetException$1:function(bn){this.task.get_IsCompleted()?_6.FailWith("Task already completed."):null;this.task.status=7;this.task.exc=new Y.New$3([bn]);this.task.RunContinuations();},SetCanceled:function(){this.task.get_IsCompleted()?_6.FailWith("Task already completed."):null;this.task.status=6;this.task.RunContinuations();},get_Task:function(){return this.task;}},null,bi);bi.New=bl.Ctor(function(){this.task=new bh.New(null,t.noneCT(),1,null,void 0);null;},bi);bj.Hash=function(bn){var bo;bo=typeof bn;return bo=="function"?0:bo=="boolean"?bn?1:0:bo=="number"?bn:bo=="string"?bj.hashString(bn):bo=="object"?bn==null?0:bn instanceof a.Array?bj.hashArray(bn):bj.hashObject(bn):0;};bj.hashObject=function(bn){var bo,bp;return"GetHashCode"in bn?bn.GetHashCode():(bo=bl.Curried2(bj.hashMix),bp=[0],d.ForEach(bn,function(bq){bp[0]=(bo((bo(bp[0]))(bj.hashString(bq))))(bj.Hash(bn[bq]));return false;}),bp[0]);};bj.hashString=function(bn){var bo,bp;if(bn===null)bo=0;else{bp=5381;var bq,br;for(bq=0,br=bn.length-1;bq<=br;bq++)bp=bj.hashMix(bp,bn.charCodeAt(bq)<<0);bo=bp;}return bo;};bj.hashArray=function(bn){var bo;bo=-34948909;var bp,bq;for(bp=0,bq=C.length(bn)-1;bp<=bq;bp++)bo=bj.hashMix(bo,bj.Hash(C.get(bn,bp)));return bo;};bj.hashMix=function(bn,bo){return(bn<<5)+bn+bo;};bj.Equals=function(bn,bo){var bp;return bn===bo?true:(bp=typeof bn,bp=="object"?(((bn===null?true:bn===void 0)?true:bo===null)?true:bo===void 0)?false:"Equals"in bn?bn.Equals(bo):(bn instanceof a.Array?bo instanceof a.Array:false)?bj.arrayEquals(bn,bo):(bn instanceof a.Date?bo instanceof a.Date:false)?bj.dateEquals(bn,bo):((bl.Curried2(function(bq,br){var bs;bs=[true];d.ForEach(bq,function(bt){bs[0]=!bq.hasOwnProperty(bt)?true:br.hasOwnProperty(bt)?bj.Equals(bq[bt],br[bt]):false;return!bs[0];});bs[0]?d.ForEach(br,function(bt){bs[0]=!br.hasOwnProperty(bt)?true:bq.hasOwnProperty(bt);return!bs[0];}):null;return bs[0];}))(bn))(bo):bp=="function"?"$Func"in bn?bn.$Func===bo.$Func?bn.$Target===bo.$Target:false:("$Invokes"in bn?"$Invokes"in bo:false)?bj.arrayEquals(bn.$Invokes,bo.$Invokes):false:false);};bj.dateEquals=function(bn,bo){return bn.getTime()===bo.getTime();};bj.arrayEquals=function(bn,bo){var bp,bq,br;if(C.length(bn)===C.length(bo)){bq=true;br=0;while(bq?br<C.length(bn):false){!bj.Equals(C.get(bn,br),C.get(bo,br))?void(bq=false):null;br=br+1;}bp=bq;}else bp=false;return bp;};bj.Compare=function(bn,bo){var bp,bq;if(bn===bo)bp=0;else{var br=typeof bn;switch(br=="function"?1:br=="boolean"?2:br=="number"?2:br=="string"?2:br=="object"?3:0){case 0:bp=typeof bo=="undefined"?0:-1;break;case 1:bp=_6.FailWith("Cannot compare function values.");break;case 2:bp=bn<bo?-1:1;break;case 3:bp=bn===null?-1:bo===null?1:"CompareTo"in bn?bn.CompareTo(bo):"CompareTo0"in bn?bn.CompareTo0(bo):(bn instanceof a.Array?bo instanceof a.Array:false)?bj.compareArrays(bn,bo):(bn instanceof a.Date?bo instanceof a.Date:false)?bj.compareDates(bn,bo):((bl.Curried2(function(bs,bt){var bu;bu=[0];d.ForEach(bs,function(bv){return!bs.hasOwnProperty(bv)?false:!bt.hasOwnProperty(bv)?(bu[0]=1,true):(bu[0]=bj.Compare(bs[bv],bt[bv]),bu[0]!==0);});bu[0]===0?d.ForEach(bt,function(bv){return!bt.hasOwnProperty(bv)?false:!bs.hasOwnProperty(bv)?(bu[0]=-1,true):false;}):null;return bu[0];}))(bn))(bo);break;}}return bp;};bj.compareDates=function(bn,bo){return _6.Compare(bn.getTime(),bo.getTime());};bj.compareArrays=function(bn,bo){var bp,bq,br;if(C.length(bn)<C.length(bo))bp=-1;else if(C.length(bn)>C.length(bo))bp=1;else{bq=0;br=0;while(bq===0?br<C.length(bn):false){bq=bj.Compare(C.get(bn,br),C.get(bo,br));br=br+1;}bp=bq;}return bp;};}());
